<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="shortcut icon" href="/images/img/favicon.webp"/><meta name="keywords" content="Blog RUA"/><meta name="description" content="Personal blog."/><meta name="author" content="Arthur,i@rua.plus"/><title>RUA - systemd çš„åŸºç¡€æ“ä½œ</title><meta name="next-head-count" content="7"/><link rel="preload" href="/_next/static/css/39834862c769c308.css" as="style"/><link rel="stylesheet" href="/_next/static/css/39834862c769c308.css" data-n-g=""/><link rel="preload" href="/_next/static/css/c2a527101433f11d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c2a527101433f11d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script defer="" src="/_next/static/chunks/219-ddf2abc0472da9bd.js"></script><script defer="" src="/_next/static/chunks/419.d5302bfd9d8378c2.js"></script><script defer="" src="/_next/static/chunks/771.84a2737df445ba88.js"></script><script defer="" src="/_next/static/chunks/929.b2c0b4f7606bfefe.js"></script><script defer="" src="/_next/static/chunks/485-3e3bf066e6f4a6bd.js"></script><script defer="" src="/_next/static/chunks/189.ee2e569101c160eb.js"></script><script defer="" src="/_next/static/chunks/125.4ff7adc183744312.js"></script><script defer="" src="/_next/static/chunks/980.41f5e97cd35a6621.js"></script><script defer="" src="/_next/static/chunks/106.7a94988fd220337e.js"></script><script src="/_next/static/chunks/webpack-c08977534ec7c137.js" defer=""></script><script src="/_next/static/chunks/framework-5cd9e2157a4a6aee.js" defer=""></script><script src="/_next/static/chunks/main-472dbb675bbf7f67.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a34fa0ed9496fbe8.js" defer=""></script><script src="/_next/static/chunks/84-43981acebe84e1d3.js" defer=""></script><script src="/_next/static/chunks/pages/p/%5Bslug%5D-684bfb16186b52fe.js" defer=""></script><script src="/_next/static/k6NIc4JfXUsE09z9QnALx/_buildManifest.js" defer=""></script><script src="/_next/static/k6NIc4JfXUsE09z9QnALx/_ssgManifest.js" defer=""></script><script src="/_next/static/k6NIc4JfXUsE09z9QnALx/_middlewareManifest.js" defer=""></script></head><body><script>(function setScript(initialValue) {
  var mql = window.matchMedia("(prefers-color-scheme: dark)");
  var systemPreference = mql.matches ? "dark" : "light";
  var persistedPreference;

  try {
    persistedPreference = localStorage.getItem("chakra-ui-color-mode");
  } catch (error) {
    console.log("Chakra UI: localStorage is not available. Color mode persistence might not work as expected");
  }

  var isInStorage = typeof persistedPreference === "string";
  var colorMode;

  if (isInStorage) {
    colorMode = persistedPreference;
  } else {
    colorMode = initialValue === "system" ? systemPreference : initialValue;
  }

  if (colorMode) {
    var root = document.documentElement;
    root.style.setProperty("--chakra-ui-color-mode", colorMode);
  }
})('light')</script><div id="__next"><style data-emotion="css-global 1r47v8">:host,:root{--chakra-ring-inset:var(--chakra-empty,/*!*/ /*!*/);--chakra-ring-offset-width:0px;--chakra-ring-offset-color:#fff;--chakra-ring-color:rgba(66, 153, 225, 0.6);--chakra-ring-offset-shadow:0 0 #0000;--chakra-ring-shadow:0 0 #0000;--chakra-space-x-reverse:0;--chakra-space-y-reverse:0;--chakra-colors-transparent:transparent;--chakra-colors-current:currentColor;--chakra-colors-black:#000000;--chakra-colors-white:#FFFFFF;--chakra-colors-whiteAlpha-50:rgba(255, 255, 255, 0.04);--chakra-colors-whiteAlpha-100:rgba(255, 255, 255, 0.06);--chakra-colors-whiteAlpha-200:rgba(255, 255, 255, 0.08);--chakra-colors-whiteAlpha-300:rgba(255, 255, 255, 0.16);--chakra-colors-whiteAlpha-400:rgba(255, 255, 255, 0.24);--chakra-colors-whiteAlpha-500:rgba(255, 255, 255, 0.36);--chakra-colors-whiteAlpha-600:rgba(255, 255, 255, 0.48);--chakra-colors-whiteAlpha-700:rgba(255, 255, 255, 0.64);--chakra-colors-whiteAlpha-800:rgba(255, 255, 255, 0.80);--chakra-colors-whiteAlpha-900:rgba(255, 255, 255, 0.92);--chakra-colors-blackAlpha-50:rgba(0, 0, 0, 0.04);--chakra-colors-blackAlpha-100:rgba(0, 0, 0, 0.06);--chakra-colors-blackAlpha-200:rgba(0, 0, 0, 0.08);--chakra-colors-blackAlpha-300:rgba(0, 0, 0, 0.16);--chakra-colors-blackAlpha-400:rgba(0, 0, 0, 0.24);--chakra-colors-blackAlpha-500:rgba(0, 0, 0, 0.36);--chakra-colors-blackAlpha-600:rgba(0, 0, 0, 0.48);--chakra-colors-blackAlpha-700:rgba(0, 0, 0, 0.64);--chakra-colors-blackAlpha-800:rgba(0, 0, 0, 0.80);--chakra-colors-blackAlpha-900:rgba(0, 0, 0, 0.92);--chakra-colors-gray-50:#F7FAFC;--chakra-colors-gray-100:#EDF2F7;--chakra-colors-gray-200:#E2E8F0;--chakra-colors-gray-300:#CBD5E0;--chakra-colors-gray-400:#A0AEC0;--chakra-colors-gray-500:#718096;--chakra-colors-gray-600:#4A5568;--chakra-colors-gray-700:#2D3748;--chakra-colors-gray-800:#1A202C;--chakra-colors-gray-900:#171923;--chakra-colors-red-50:#FFF5F5;--chakra-colors-red-100:#FED7D7;--chakra-colors-red-200:#FEB2B2;--chakra-colors-red-300:#FC8181;--chakra-colors-red-400:#F56565;--chakra-colors-red-500:#E53E3E;--chakra-colors-red-600:#C53030;--chakra-colors-red-700:#9B2C2C;--chakra-colors-red-800:#822727;--chakra-colors-red-900:#63171B;--chakra-colors-orange-50:#FFFAF0;--chakra-colors-orange-100:#FEEBC8;--chakra-colors-orange-200:#FBD38D;--chakra-colors-orange-300:#F6AD55;--chakra-colors-orange-400:#ED8936;--chakra-colors-orange-500:#DD6B20;--chakra-colors-orange-600:#C05621;--chakra-colors-orange-700:#9C4221;--chakra-colors-orange-800:#7B341E;--chakra-colors-orange-900:#652B19;--chakra-colors-yellow-50:#FFFFF0;--chakra-colors-yellow-100:#FEFCBF;--chakra-colors-yellow-200:#FAF089;--chakra-colors-yellow-300:#F6E05E;--chakra-colors-yellow-400:#ECC94B;--chakra-colors-yellow-500:#D69E2E;--chakra-colors-yellow-600:#B7791F;--chakra-colors-yellow-700:#975A16;--chakra-colors-yellow-800:#744210;--chakra-colors-yellow-900:#5F370E;--chakra-colors-green-50:#F0FFF4;--chakra-colors-green-100:#C6F6D5;--chakra-colors-green-200:#9AE6B4;--chakra-colors-green-300:#68D391;--chakra-colors-green-400:#48BB78;--chakra-colors-green-500:#38A169;--chakra-colors-green-600:#2F855A;--chakra-colors-green-700:#276749;--chakra-colors-green-800:#22543D;--chakra-colors-green-900:#1C4532;--chakra-colors-teal-50:#E6FFFA;--chakra-colors-teal-100:#B2F5EA;--chakra-colors-teal-200:#81E6D9;--chakra-colors-teal-300:#4FD1C5;--chakra-colors-teal-400:#38B2AC;--chakra-colors-teal-500:#319795;--chakra-colors-teal-600:#2C7A7B;--chakra-colors-teal-700:#285E61;--chakra-colors-teal-800:#234E52;--chakra-colors-teal-900:#1D4044;--chakra-colors-blue-50:#ebf8ff;--chakra-colors-blue-100:#bee3f8;--chakra-colors-blue-200:#90cdf4;--chakra-colors-blue-300:#63b3ed;--chakra-colors-blue-400:#4299e1;--chakra-colors-blue-500:#3182ce;--chakra-colors-blue-600:#2b6cb0;--chakra-colors-blue-700:#2c5282;--chakra-colors-blue-800:#2a4365;--chakra-colors-blue-900:#1A365D;--chakra-colors-cyan-50:#EDFDFD;--chakra-colors-cyan-100:#C4F1F9;--chakra-colors-cyan-200:#9DECF9;--chakra-colors-cyan-300:#76E4F7;--chakra-colors-cyan-400:#0BC5EA;--chakra-colors-cyan-500:#00B5D8;--chakra-colors-cyan-600:#00A3C4;--chakra-colors-cyan-700:#0987A0;--chakra-colors-cyan-800:#086F83;--chakra-colors-cyan-900:#065666;--chakra-colors-purple-50:#FAF5FF;--chakra-colors-purple-100:#E9D8FD;--chakra-colors-purple-200:#D6BCFA;--chakra-colors-purple-300:#B794F4;--chakra-colors-purple-400:#9F7AEA;--chakra-colors-purple-500:#805AD5;--chakra-colors-purple-600:#6B46C1;--chakra-colors-purple-700:#553C9A;--chakra-colors-purple-800:#44337A;--chakra-colors-purple-900:#322659;--chakra-colors-pink-50:#FFF5F7;--chakra-colors-pink-100:#FED7E2;--chakra-colors-pink-200:#FBB6CE;--chakra-colors-pink-300:#F687B3;--chakra-colors-pink-400:#ED64A6;--chakra-colors-pink-500:#D53F8C;--chakra-colors-pink-600:#B83280;--chakra-colors-pink-700:#97266D;--chakra-colors-pink-800:#702459;--chakra-colors-pink-900:#521B41;--chakra-colors-linkedin-50:#E8F4F9;--chakra-colors-linkedin-100:#CFEDFB;--chakra-colors-linkedin-200:#9BDAF3;--chakra-colors-linkedin-300:#68C7EC;--chakra-colors-linkedin-400:#34B3E4;--chakra-colors-linkedin-500:#00A0DC;--chakra-colors-linkedin-600:#008CC9;--chakra-colors-linkedin-700:#0077B5;--chakra-colors-linkedin-800:#005E93;--chakra-colors-linkedin-900:#004471;--chakra-colors-facebook-50:#E8F4F9;--chakra-colors-facebook-100:#D9DEE9;--chakra-colors-facebook-200:#B7C2DA;--chakra-colors-facebook-300:#6482C0;--chakra-colors-facebook-400:#4267B2;--chakra-colors-facebook-500:#385898;--chakra-colors-facebook-600:#314E89;--chakra-colors-facebook-700:#29487D;--chakra-colors-facebook-800:#223B67;--chakra-colors-facebook-900:#1E355B;--chakra-colors-messenger-50:#D0E6FF;--chakra-colors-messenger-100:#B9DAFF;--chakra-colors-messenger-200:#A2CDFF;--chakra-colors-messenger-300:#7AB8FF;--chakra-colors-messenger-400:#2E90FF;--chakra-colors-messenger-500:#0078FF;--chakra-colors-messenger-600:#0063D1;--chakra-colors-messenger-700:#0052AC;--chakra-colors-messenger-800:#003C7E;--chakra-colors-messenger-900:#002C5C;--chakra-colors-whatsapp-50:#dffeec;--chakra-colors-whatsapp-100:#b9f5d0;--chakra-colors-whatsapp-200:#90edb3;--chakra-colors-whatsapp-300:#65e495;--chakra-colors-whatsapp-400:#3cdd78;--chakra-colors-whatsapp-500:#22c35e;--chakra-colors-whatsapp-600:#179848;--chakra-colors-whatsapp-700:#0c6c33;--chakra-colors-whatsapp-800:#01421c;--chakra-colors-whatsapp-900:#001803;--chakra-colors-twitter-50:#E5F4FD;--chakra-colors-twitter-100:#C8E9FB;--chakra-colors-twitter-200:#A8DCFA;--chakra-colors-twitter-300:#83CDF7;--chakra-colors-twitter-400:#57BBF5;--chakra-colors-twitter-500:#1DA1F2;--chakra-colors-twitter-600:#1A94DA;--chakra-colors-twitter-700:#1681BF;--chakra-colors-twitter-800:#136B9E;--chakra-colors-twitter-900:#0D4D71;--chakra-colors-telegram-50:#E3F2F9;--chakra-colors-telegram-100:#C5E4F3;--chakra-colors-telegram-200:#A2D4EC;--chakra-colors-telegram-300:#7AC1E4;--chakra-colors-telegram-400:#47A9DA;--chakra-colors-telegram-500:#0088CC;--chakra-colors-telegram-600:#007AB8;--chakra-colors-telegram-700:#006BA1;--chakra-colors-telegram-800:#005885;--chakra-colors-telegram-900:#003F5E;--chakra-colors-home-bg:#f5f5fa;--chakra-borders-none:0;--chakra-borders-1px:1px solid;--chakra-borders-2px:2px solid;--chakra-borders-4px:4px solid;--chakra-borders-8px:8px solid;--chakra-fonts-heading:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--chakra-fonts-body:-apple-system,BlinkMacSystemFont,'Helvetica Neue',Helvetica,Segoe UI,Arial,Roboto,'PingFang SC',miui,'Hiragino Sans GB','Microsoft Yahei',sans-serif;--chakra-fonts-mono:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--chakra-fontSizes-xs:0.75rem;--chakra-fontSizes-sm:0.875rem;--chakra-fontSizes-md:1rem;--chakra-fontSizes-lg:1.125rem;--chakra-fontSizes-xl:1.25rem;--chakra-fontSizes-2xl:1.5rem;--chakra-fontSizes-3xl:1.875rem;--chakra-fontSizes-4xl:2.25rem;--chakra-fontSizes-5xl:3rem;--chakra-fontSizes-6xl:3.75rem;--chakra-fontSizes-7xl:4.5rem;--chakra-fontSizes-8xl:6rem;--chakra-fontSizes-9xl:8rem;--chakra-fontWeights-hairline:100;--chakra-fontWeights-thin:200;--chakra-fontWeights-light:300;--chakra-fontWeights-normal:400;--chakra-fontWeights-medium:500;--chakra-fontWeights-semibold:600;--chakra-fontWeights-bold:700;--chakra-fontWeights-extrabold:800;--chakra-fontWeights-black:900;--chakra-letterSpacings-tighter:-0.05em;--chakra-letterSpacings-tight:-0.025em;--chakra-letterSpacings-normal:0;--chakra-letterSpacings-wide:0.025em;--chakra-letterSpacings-wider:0.05em;--chakra-letterSpacings-widest:0.1em;--chakra-lineHeights-3:.75rem;--chakra-lineHeights-4:1rem;--chakra-lineHeights-5:1.25rem;--chakra-lineHeights-6:1.5rem;--chakra-lineHeights-7:1.75rem;--chakra-lineHeights-8:2rem;--chakra-lineHeights-9:2.25rem;--chakra-lineHeights-10:2.5rem;--chakra-lineHeights-normal:normal;--chakra-lineHeights-none:1;--chakra-lineHeights-shorter:1.25;--chakra-lineHeights-short:1.375;--chakra-lineHeights-base:1.5;--chakra-lineHeights-tall:1.625;--chakra-lineHeights-taller:2;--chakra-radii-none:0;--chakra-radii-sm:0.125rem;--chakra-radii-base:0.25rem;--chakra-radii-md:0.375rem;--chakra-radii-lg:0.5rem;--chakra-radii-xl:0.75rem;--chakra-radii-2xl:1rem;--chakra-radii-3xl:1.5rem;--chakra-radii-full:9999px;--chakra-space-1:0.25rem;--chakra-space-2:0.5rem;--chakra-space-3:0.75rem;--chakra-space-4:1rem;--chakra-space-5:1.25rem;--chakra-space-6:1.5rem;--chakra-space-7:1.75rem;--chakra-space-8:2rem;--chakra-space-9:2.25rem;--chakra-space-10:2.5rem;--chakra-space-12:3rem;--chakra-space-14:3.5rem;--chakra-space-16:4rem;--chakra-space-20:5rem;--chakra-space-24:6rem;--chakra-space-28:7rem;--chakra-space-32:8rem;--chakra-space-36:9rem;--chakra-space-40:10rem;--chakra-space-44:11rem;--chakra-space-48:12rem;--chakra-space-52:13rem;--chakra-space-56:14rem;--chakra-space-60:15rem;--chakra-space-64:16rem;--chakra-space-72:18rem;--chakra-space-80:20rem;--chakra-space-96:24rem;--chakra-space-px:1px;--chakra-space-0\.5:0.125rem;--chakra-space-1\.5:0.375rem;--chakra-space-2\.5:0.625rem;--chakra-space-3\.5:0.875rem;--chakra-shadows-xs:0 0 0 1px rgba(0, 0, 0, 0.05);--chakra-shadows-sm:0 1px 2px 0 rgba(0, 0, 0, 0.05);--chakra-shadows-base:0 1px 3px 0 rgba(0, 0, 0, 0.1),0 1px 2px 0 rgba(0, 0, 0, 0.06);--chakra-shadows-md:0 4px 6px -1px rgba(0, 0, 0, 0.1),0 2px 4px -1px rgba(0, 0, 0, 0.06);--chakra-shadows-lg:0 10px 15px -3px rgba(0, 0, 0, 0.1),0 4px 6px -2px rgba(0, 0, 0, 0.05);--chakra-shadows-xl:0 20px 25px -5px rgba(0, 0, 0, 0.1),0 10px 10px -5px rgba(0, 0, 0, 0.04);--chakra-shadows-2xl:0 25px 50px -12px rgba(0, 0, 0, 0.25);--chakra-shadows-outline:0 0 0 3px rgba(66, 153, 225, 0.6);--chakra-shadows-inner:inset 0 2px 4px 0 rgba(0,0,0,0.06);--chakra-shadows-none:none;--chakra-shadows-dark-lg:rgba(0, 0, 0, 0.1) 0px 0px 0px 1px,rgba(0, 0, 0, 0.2) 0px 5px 10px,rgba(0, 0, 0, 0.4) 0px 15px 40px;--chakra-shadows-card:0px 4px 8px rgba(0, 0, 0, 0.04),0px 0px 2px rgba(0, 0, 0, 0.06),0px 0px 1px rgba(0, 0, 0, 0.04);--chakra-sizes-1:0.25rem;--chakra-sizes-2:0.5rem;--chakra-sizes-3:0.75rem;--chakra-sizes-4:1rem;--chakra-sizes-5:1.25rem;--chakra-sizes-6:1.5rem;--chakra-sizes-7:1.75rem;--chakra-sizes-8:2rem;--chakra-sizes-9:2.25rem;--chakra-sizes-10:2.5rem;--chakra-sizes-12:3rem;--chakra-sizes-14:3.5rem;--chakra-sizes-16:4rem;--chakra-sizes-20:5rem;--chakra-sizes-24:6rem;--chakra-sizes-28:7rem;--chakra-sizes-32:8rem;--chakra-sizes-36:9rem;--chakra-sizes-40:10rem;--chakra-sizes-44:11rem;--chakra-sizes-48:12rem;--chakra-sizes-52:13rem;--chakra-sizes-56:14rem;--chakra-sizes-60:15rem;--chakra-sizes-64:16rem;--chakra-sizes-72:18rem;--chakra-sizes-80:20rem;--chakra-sizes-96:24rem;--chakra-sizes-px:1px;--chakra-sizes-0\.5:0.125rem;--chakra-sizes-1\.5:0.375rem;--chakra-sizes-2\.5:0.625rem;--chakra-sizes-3\.5:0.875rem;--chakra-sizes-max:max-content;--chakra-sizes-min:min-content;--chakra-sizes-full:100%;--chakra-sizes-3xs:14rem;--chakra-sizes-2xs:16rem;--chakra-sizes-xs:20rem;--chakra-sizes-sm:24rem;--chakra-sizes-md:28rem;--chakra-sizes-lg:32rem;--chakra-sizes-xl:36rem;--chakra-sizes-2xl:42rem;--chakra-sizes-3xl:48rem;--chakra-sizes-4xl:56rem;--chakra-sizes-5xl:64rem;--chakra-sizes-6xl:72rem;--chakra-sizes-7xl:80rem;--chakra-sizes-8xl:90rem;--chakra-sizes-container-sm:640px;--chakra-sizes-container-md:768px;--chakra-sizes-container-lg:1024px;--chakra-sizes-container-xl:1280px;--chakra-zIndices-hide:-1;--chakra-zIndices-auto:auto;--chakra-zIndices-base:0;--chakra-zIndices-docked:10;--chakra-zIndices-dropdown:1000;--chakra-zIndices-sticky:1100;--chakra-zIndices-banner:1200;--chakra-zIndices-overlay:1300;--chakra-zIndices-modal:1400;--chakra-zIndices-popover:1500;--chakra-zIndices-skipLink:1600;--chakra-zIndices-toast:1700;--chakra-zIndices-tooltip:1800;--chakra-transition-property-common:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform;--chakra-transition-property-colors:background-color,border-color,color,fill,stroke;--chakra-transition-property-dimensions:width,height;--chakra-transition-property-position:left,right,top,bottom;--chakra-transition-property-background:background-color,background-image,background-position;--chakra-transition-easing-ease-in:cubic-bezier(0.4, 0, 1, 1);--chakra-transition-easing-ease-out:cubic-bezier(0, 0, 0.2, 1);--chakra-transition-easing-ease-in-out:cubic-bezier(0.4, 0, 0.2, 1);--chakra-transition-duration-ultra-fast:50ms;--chakra-transition-duration-faster:100ms;--chakra-transition-duration-fast:150ms;--chakra-transition-duration-normal:200ms;--chakra-transition-duration-slow:300ms;--chakra-transition-duration-slower:400ms;--chakra-transition-duration-ultra-slow:500ms;--chakra-blur-none:0;--chakra-blur-sm:4px;--chakra-blur-base:8px;--chakra-blur-md:12px;--chakra-blur-lg:16px;--chakra-blur-xl:24px;--chakra-blur-2xl:40px;--chakra-blur-3xl:64px;}</style><style data-emotion="css-global 1jqlf9g">html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:system-ui,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;touch-action:manipulation;}body{position:relative;min-height:100%;font-feature-settings:'kern';}*,*::before,*::after{border-width:0;border-style:solid;box-sizing:border-box;}main{display:block;}hr{border-top-width:1px;box-sizing:content-box;height:0;overflow:visible;}pre,code,kbd,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:1em;}a{background-color:transparent;color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit;}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}b,strong{font-weight:bold;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{-webkit-appearance:none!important;}input[type="number"]{-moz-appearance:textfield;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-decoration{-webkit-appearance:none!important;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:-webkit-box;display:-webkit-list-item;display:-ms-list-itembox;display:list-item;}template{display:none;}[hidden]{display:none!important;}body,blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0;}button{background:transparent;padding:0;}fieldset{margin:0;padding:0;}ol,ul{margin:0;padding:0;}textarea{resize:vertical;}button,[role="button"]{cursor:pointer;}button::-moz-focus-inner{border:0!important;}table{border-collapse:collapse;}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;}img,svg,video,canvas,audio,iframe,embed,object{display:block;}img,video{max-width:100%;height:auto;}[data-js-focus-visible] :focus:not([data-focus-visible-added]){outline:none;box-shadow:none;}select::-ms-expand{display:none;}</style><style data-emotion="css-global 1of8e4g">body{font-family:var(--chakra-fonts-body);color:var(--chakra-colors-gray-800);background:var(--chakra-colors-white);transition-property:background-color;transition-duration:var(--chakra-transition-duration-normal);line-height:var(--chakra-lineHeights-base);}*::-webkit-input-placeholder{color:var(--chakra-colors-gray-400);}*::-moz-placeholder{color:var(--chakra-colors-gray-400);}*:-ms-input-placeholder{color:var(--chakra-colors-gray-400);}*::placeholder{color:var(--chakra-colors-gray-400);}*,*::before,::after{border-color:var(--chakra-colors-gray-200);word-wrap:break-word;}html,body{background:var(--chakra-colors-home-bg);}img,#write iframe{-webkit-filter:unset;filter:unset;transition-property:filter;transition-duration:var(--chakra-transition-duration-normal);}div{transition-property:background-color;transition-duration:var(--chakra-transition-duration-normal);}</style><style data-emotion="css 1ghv3an">.css-1ghv3an{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;height:unset;overflow:auto;-webkit-box-flex-flow:column;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;-webkit-padding-start:0.5rem;padding-inline-start:0.5rem;-webkit-padding-end:0.5rem;padding-inline-end:0.5rem;}@media screen and (min-width: 30em){.css-1ghv3an{height:unset;-webkit-box-flex-flow:column;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;}}@media screen and (min-width: 48em){.css-1ghv3an{height:100vh;-webkit-box-flex-flow:row;-webkit-flex-flow:row;-ms-flex-flow:row;flex-flow:row;}}</style><div class="css-1ghv3an"><style data-emotion="css xte4wg">.css-xte4wg{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:unset;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;width:auto;line-height:1.2;border-radius:var(--chakra-radii-md);font-weight:var(--chakra-fontWeights-semibold);transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-normal);height:var(--chakra-sizes-12);min-width:var(--chakra-sizes-12);font-size:var(--chakra-fontSizes-lg);-webkit-padding-start:var(--chakra-space-6);padding-inline-start:var(--chakra-space-6);-webkit-padding-end:var(--chakra-space-6);padding-inline-end:var(--chakra-space-6);background:var(--chakra-colors-gray-100);margin-top:1rem;top:3rem;}@media screen and (min-width: 30em){.css-xte4wg{position:unset;margin-top:1rem;}}@media screen and (min-width: 48em){.css-xte4wg{position:-webkit-sticky;position:sticky;margin-top:3rem;}}.css-xte4wg:focus,.css-xte4wg[data-focus]{box-shadow:var(--chakra-shadows-outline);}.css-xte4wg[disabled],.css-xte4wg[aria-disabled=true],.css-xte4wg[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--chakra-shadows-none);}.css-xte4wg:hover,.css-xte4wg[data-hover]{background:var(--chakra-colors-gray-200);}.css-xte4wg:hover[disabled],.css-xte4wg[data-hover][disabled],.css-xte4wg:hover[aria-disabled=true],.css-xte4wg[data-hover][aria-disabled=true],.css-xte4wg:hover[data-disabled],.css-xte4wg[data-hover][data-disabled]{background:var(--chakra-colors-gray-100);}.css-xte4wg:active,.css-xte4wg[data-active]{background:var(--chakra-colors-gray-300);}</style><button type="button" class="chakra-button css-xte4wg">BACK</button><style data-emotion="css a06krq">.css-a06krq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:var(--chakra-sizes-full);-webkit-box-flex-flow:column;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;-webkit-padding-start:unset;padding-inline-start:unset;-webkit-padding-end:unset;padding-inline-end:unset;}@media screen and (min-width: 30em){.css-a06krq{width:var(--chakra-sizes-full);-webkit-padding-start:unset;padding-inline-start:unset;-webkit-padding-end:unset;padding-inline-end:unset;}}@media screen and (min-width: 48em){.css-a06krq{width:55rem;-webkit-padding-start:1.5rem;padding-inline-start:1.5rem;-webkit-padding-end:1.5rem;padding-inline-end:1.5rem;}}@media screen and (min-width: 62em){.css-a06krq{width:55rem;}}@media screen and (min-width: 80em){.css-a06krq{width:55rem;}}@media screen and (min-width: 96em){.css-a06krq{width:68rem;}}</style><div class="css-a06krq"><style data-emotion="css 1if659q">.css-1if659q{border-radius:10px;margin-top:1rem;box-shadow:var(--chakra-shadows-lg);background:var(--chakra-colors-white);overflow:hidden;-webkit-flex:1;-ms-flex:1;flex:1;}@media screen and (min-width: 30em){.css-1if659q{margin-top:1rem;}}@media screen and (min-width: 48em){.css-1if659q{margin-top:3rem;}}</style><div class="css-1if659q"><style data-emotion="css 81xunj">.css-81xunj{padding:1rem;}@media screen and (min-width: 30em){.css-81xunj{padding:1rem;}}@media screen and (min-width: 48em){.css-81xunj{padding:2rem;}}</style><article class="css-81xunj"><header class="css-0"><style data-emotion="css 1m7qnzk">.css-1m7qnzk{font-family:var(--chakra-fonts-heading);font-weight:var(--chakra-fontWeights-bold);font-size:var(--chakra-fontSizes-3xl);line-height:1.33;margin-bottom:1rem;color:rgba(0, 0, 0, 0.85);}@media screen and (min-width: 48em){.css-1m7qnzk{font-size:var(--chakra-fontSizes-4xl);line-height:1.2;}}</style><h1 class="chakra-heading css-1m7qnzk">systemd çš„åŸºç¡€æ“ä½œ</h1><style data-emotion="css acwcvw">.css-acwcvw{margin-bottom:1rem;}</style><div class="css-acwcvw"><style data-emotion="css 1kpd5c2">.css-1kpd5c2{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;vertical-align:top;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;font-weight:var(--chakra-fontWeights-medium);line-height:1.2;outline:2px solid transparent;outline-offset:2px;min-height:1.5rem;min-width:1.5rem;font-size:var(--chakra-fontSizes-sm);border-radius:var(--chakra-radii-md);-webkit-padding-start:var(--chakra-space-2);padding-inline-start:var(--chakra-space-2);-webkit-padding-end:var(--chakra-space-2);padding-inline-end:var(--chakra-space-2);background:var(--chakra-colors-gray-100);color:var(--chakra-colors-gray-800);}.css-1kpd5c2:focus,.css-1kpd5c2[data-focus]{box-shadow:var(--chakra-shadows-outline);}</style><span class="css-1kpd5c2">Linux</span></div><style data-emotion="css x8djax">.css-x8djax{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:var(--chakra-colors-gray-600);}</style><div class="css-x8djax"><style data-emotion="css 1lr2xj">.css-1lr2xj{width:1em;height:1em;display:inline-block;line-height:1em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:currentColor;margin-right:0.5rem;}</style><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" focusable="false" class="chakra-icon css-1lr2xj" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg><style data-emotion="css 129gw94">.css-129gw94{line-height:0;}</style><time dateTime="2019-06-14T14:42:41.000Z" class="css-129gw94">2019/06/14</time></div></header><style data-emotion="css i51og3">.css-i51og3{margin-top:2rem;}</style><section id="write" class="css-i51og3"><h2 id="ä»€ä¹ˆæ˜¯systemd">ä»€ä¹ˆæ˜¯systemdï¼Ÿ</h2>
<p>Systemdæ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ä¸€äº›Linuxå‘è¡Œç‰ˆä¸­å¸¸è§çš„ä¸€å¥—ä¸­å¤®åŒ–ç³»ç»ŸåŠè®¾ç½®ç®¡ç†ç¨‹åº(init)ï¼ŒåŒ…æ‹¬æœ‰<style data-emotion="css wox0k7">.css-wox0k7{transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-fast);transition-timing-function:var(--chakra-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:none;text-decoration:none;outline:2px solid transparent;outline-offset:2px;color:inherit;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-wox0k7:hover,.css-wox0k7[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-wox0k7:focus,.css-wox0k7[data-focus]{box-shadow:var(--chakra-shadows-outline);}</style><a target="_blank" rel="noopener noreferrer" class="chakra-link css-wox0k7" href="https://zh.wikipedia.org/wiki/%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B">å®ˆæŠ¤è¿›ç¨‹<style data-emotion="css 2y6psj">.css-2y6psj{width:1em;height:1em;display:inline-block;line-height:1em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:currentColor;vertical-align:middle;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;}</style><svg viewBox="0 0 24 24" focusable="false" class="chakra-icon css-2y6psj"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><path d="M15 3h6v6"></path><path d="M10 14L21 3"></path></g></svg></a>ã€<a target="_blank" rel="noopener noreferrer" class="chakra-link css-wox0k7" href="https://zh.wikipedia.org/wiki/%E7%A8%8B%E5%BC%8F%E5%BA%AB">ç¨‹åºåº“<svg viewBox="0 0 24 24" focusable="false" class="chakra-icon css-2y6psj"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><path d="M15 3h6v6"></path><path d="M10 14L21 3"></path></g></svg></a>ä»¥åŠåº”ç”¨è½¯ä»¶ã€‚</p>
<p>æˆ‘ä»¬ç»å¸¸ä½¿ç”¨<code>systemctl start apache2</code>æ¥å¯åŠ¨ä¸€äº›æœåŠ¡æˆ–è€…åº”ç”¨è½¯ä»¶æ—¶ï¼Œä½¿ç”¨åˆ°çš„å°±æ˜¯Systemdçš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>å½“å‰ç»å¤§å¤šæ•°çš„Linuxå‘è¡Œç‰ˆéƒ½å·²é‡‡ç”¨systemdä»£æ›¿åŸæ¥çš„<a target="_blank" rel="noopener noreferrer" class="chakra-link css-wox0k7" href="https://zh.wikipedia.org/wiki/UNIX_System_V">System V<svg viewBox="0 0 24 24" focusable="false" class="chakra-icon css-2y6psj"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><path d="M15 3h6v6"></path><path d="M10 14L21 3"></path></g></svg></a>ã€‚</p>
<h2 id="å­¦ä¹ å®ƒçš„ä½œç”¨">å­¦ä¹ å®ƒçš„ä½œç”¨ï¼Ÿ</h2>
<p>å®ƒèƒ½å¤Ÿæ–¹ä¾¿çš„å¯¹ä¸€äº›è½¯ä»¶è¿è¡Œè¿›è¡Œç®¡ç†ï¼Œç»å¸¸ä½¿ç”¨<code>systemctl</code>çš„åŒå­¦ä»¬å¯èƒ½ä¼šæ¯”è¾ƒäº†è§£ï¼Œè­¬å¦‚æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ï¼Œè®¾ç½®å¼€æœºè‡ªå¯ç­‰æ“ä½œã€‚</p>
<p>æœ€è¿‘å°é²œäº†Ubuntuï¼Œä½†æ˜¯é‡åˆ°ä¸ªæ–°çš„é—®é¢˜ã€‚åœ¨Ubuntu 18.10ä¸­ï¼Œå·²ç»å°†ä»¥å‰çš„å¼€æœºè‡ªå¯åŠ¨çš„è„šæœ¬<code>/etc/rc.local</code>å»æ‰äº†ã€‚æ— æ„ä¸­çœ‹åˆ°ä½¿ç”¨systemdæ¥æ§åˆ¶å¼€æœºè‡ªå¯åº”ç”¨ç¨‹åºã€‚</p>
<p>åæ¥å°±é¡ºä¾¿å°è¯•è¿›ä¸€æ­¥äº†è§£ä¸€ä¸‹systemdï¼Œæ¯•ç«Ÿè¿˜æ˜¯æ¯”è¾ƒæœ‰ç”¨çš„ã€‚</p>
<h2 id="å¼€æœºè¿è¡Œå¯åŠ¨çš„åŸç†">å¼€æœºè¿è¡Œå¯åŠ¨çš„åŸç†</h2>
<p>ä¸€äº›æ”¯æŒsystemdçš„è½¯ä»¶ï¼Œåœ¨å®‰è£…æ—¶ä¼šåœ¨<code>/usr/lib/systemd/system</code>ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ªæ”¯æŒsystemdçš„é…ç½®æ–‡ä»¶ã€‚å½“æˆ‘ä»¬ä½¿ç”¨<code>systemctl enable apache2</code>æ—¶ï¼Œå°±ç›¸å½“äºå°†<code>/usr/lib/systemd/system</code>ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶æ·»åŠ ä¸€ä¸ªç¬¦å·é“¾æ¥ï¼Œé“¾æ¥åˆ°<code>/etc/systemd/system</code>ç›®å½•ã€‚</p>
<p>å½“æˆ‘ä»¬çš„ç³»ç»Ÿå¼€æœºæ—¶ï¼Œsystemdä¼šæ‰§è¡Œ<code>/etc/systemd/system</code>ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ï¼Œä»¥è¾¾åˆ°å¼€æœºè‡ªå¯çš„æ•ˆæœã€‚</p>
<p>æœ€è¿‘å‘ç°å½“å‰è¾ƒæ–°çš„å‘è¡Œç‰ˆï¼Œä½¿ç”¨enableå‘½ä»¤æ—¶ï¼Œåˆ›å»ºçš„é“¾æ¥ç›®å½•ä¸ºï¼š</p>
<pre><style data-emotion="css 19bp9bt">.css-19bp9bt{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;width:auto;line-height:1.2;border-radius:var(--chakra-radii-md);font-weight:var(--chakra-fontWeights-semibold);transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-normal);height:var(--chakra-sizes-6);min-width:var(--chakra-sizes-6);font-size:var(--chakra-fontSizes-xs);-webkit-padding-start:var(--chakra-space-2);padding-inline-start:var(--chakra-space-2);-webkit-padding-end:var(--chakra-space-2);padding-inline-end:var(--chakra-space-2);background:var(--chakra-colors-teal-500);color:var(--chakra-colors-white);top:5px;right:5px;}.css-19bp9bt:focus,.css-19bp9bt[data-focus]{box-shadow:var(--chakra-shadows-outline);}.css-19bp9bt[disabled],.css-19bp9bt[aria-disabled=true],.css-19bp9bt[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--chakra-shadows-none);}.css-19bp9bt:hover,.css-19bp9bt[data-hover]{background:var(--chakra-colors-teal-600);}.css-19bp9bt:hover[disabled],.css-19bp9bt[data-hover][disabled],.css-19bp9bt:hover[aria-disabled=true],.css-19bp9bt[data-hover][aria-disabled=true],.css-19bp9bt:hover[data-disabled],.css-19bp9bt[data-hover][data-disabled]{background:var(--chakra-colors-teal-500);}.css-19bp9bt:active,.css-19bp9bt[data-active]{background:var(--chakra-colors-teal-700);}</style><button type="button" class="chakra-button css-19bp9bt">COPY</button><code class="hljs language-bash">~ systemctl <span class="hljs-built_in">enable</span> httpd             
Created symlink from /etc/systemd/system/multi-user.target.wants/httpd.service to /usr/lib/systemd/system/httpd.service.
</code></pre>
<h2 id="é…ç½®æ–‡ä»¶">é…ç½®æ–‡ä»¶</h2>
<p>å‡ æ¡å¸¸ç”¨ä¸”ç†Ÿæ‚‰çš„sysemctlçš„å‘½ä»¤è¿™é‡Œå°±ä¸åœ¨è¯¦ç»†ä»‹ç»äº†ã€‚è¿™é‡Œç›´æ¥äº†è§£ä¸€ä¸‹æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œé…ç½®æ–‡ä»¶ã€‚</p>
<p>æ—©åœ¨å¾ˆä¹…ä»¥å‰ï¼Œå¯¹äº<a target="_blank" rel="noopener noreferrer" class="chakra-link css-wox0k7" href="https://www.defectink.com/defect/12.html">Nyncat<svg viewBox="0 0 24 24" focusable="false" class="chakra-icon css-2y6psj"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><path d="M15 3h6v6"></path><path d="M10 14L21 3"></path></g></svg></a>è¿™ç¯‡æ–‡ç« ï¼Œé‡Œé¢å°±ä½¿ç”¨åˆ°è‡ªå·±ç¼–å†™systemdçš„é…ç½®æ–‡ä»¶æ¥è¾¾åˆ°å¯¹nyancatè¿™ä¸ªæœåŠ¡çš„è¯¦ç»†æ§åˆ¶ã€‚ï¼ˆè™½ç„¶å½“æ—¶æˆ‘ä¸ç†è§£é…ç½®æ–‡ä»¶è¯´çš„å•¥â€¦</p>
<p>ä¸Šè¿°äº†è§£åˆ°ï¼Œé…ç½®æ–‡ä»¶ä¸€èˆ¬æƒ…å†µä¸‹å‡ºç°åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼š<code>/usr/lib/systemd/system</code>ç›®å½•å’Œ<code>/etc/systemd/system/multi-user.target.wants</code>ç›®å½•ã€‚å¯¹äºå®Œå…¨ä¸äº†è§£é…ç½®æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆåœ¨è¿™ä¸¤ä¸ªç›®å½•æ‰¾ä¸ªæ¡ˆä¾‹äº†è§£ä¸€ä¸‹ã€‚</p>
<p><strong>æŸäº›Ubuntuçš„å‘è¡Œç‰ˆå¯èƒ½åœ¨<code>/lib/systemd/system</code>ç›®å½•ä¸‹ä¿å­˜é…ç½®æ–‡ä»¶</strong></p>
<p>ä¾‹å¦‚ï¼ŒCentOSçš„httpdï¼š</p>
<pre><button type="button" class="chakra-button css-19bp9bt">COPY</button><code class="hljs language-ini"><span class="hljs-section">[Unit]</span>
<span class="hljs-attr">Description</span>=The Apache HTTP Server
<span class="hljs-attr">After</span>=network.target remote-fs.target nss-lookup.target
<span class="hljs-attr">Documentation</span>=man:httpd(<span class="hljs-number">8</span>)
<span class="hljs-attr">Documentation</span>=man:apachectl(<span class="hljs-number">8</span>)

<span class="hljs-section">[Service]</span>
<span class="hljs-attr">Type</span>=notify
<span class="hljs-attr">EnvironmentFile</span>=/etc/sysconfig/httpd
<span class="hljs-attr">ExecStart</span>=/usr/sbin/httpd <span class="hljs-variable">$OPTIONS</span> -DFOREGROUND
<span class="hljs-attr">ExecReload</span>=/usr/sbin/httpd <span class="hljs-variable">$OPTIONS</span> -k graceful
<span class="hljs-attr">ExecStop</span>=/bin/kill -WINCH <span class="hljs-variable">${MAINPID}</span>
<span class="hljs-comment"># We want systemd to give httpd some time to finish gracefully, but still want</span>
<span class="hljs-comment"># it to kill httpd after TimeoutStopSec if something went wrong during the</span>
<span class="hljs-comment"># graceful stop. Normally, Systemd sends SIGTERM signal right after the</span>
<span class="hljs-comment"># ExecStop, which would kill httpd. We are sending useless SIGCONT here to give</span>
<span class="hljs-comment"># httpd time to finish.</span>
<span class="hljs-attr">KillSignal</span>=SIGCONT
<span class="hljs-attr">PrivateTmp</span>=<span class="hljs-literal">true</span>

<span class="hljs-section">[Install]</span>
<span class="hljs-attr">WantedBy</span>=multi-user.target
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥äº†è§£åˆ°ï¼Œå®ƒåŸºæœ¬ä¸Šåˆ†ä¸ºä¸‰ä¸ªåŒºå—ï¼š<code>Unit</code>ã€<code>Service</code>å’Œ<code>Install</code>åŒºå—ã€‚</p>
<h3 id="unitåŒºåŸŸ">UnitåŒºåŸŸ</h3>
<p>UnitåŒºåŸŸç”¨äºè§£é‡Šå¯åŠ¨é¡ºåºä¸ä¾èµ–å…³ç³»ã€‚å¯ä»¥ç›´è§‚çš„çœ‹åˆ°å®ƒæœ‰å‡ ä¸ªå­—æ®µï¼š</p>
<ul>
<li>Description</li>
<li>After</li>
<li>Documentation</li>
</ul>
<p>ç¬¬ä¸€çœ¼çœ‹ä¸Šå»å¯èƒ½éƒ½æ˜¯æ¯”è¾ƒä¹±ä¸ƒå…«ç³Ÿçš„ï¼Œæ ¹æœ¬ä¸çŸ¥é“å®ƒåœ¨è¯´å•¥ã€‚ä½†æ˜¯æˆ‘ä»¬æ‹†å¼€æ¥ä¸€ä¸ªä¸€ä¸ªäº†è§£ï¼Œå°±ä¼šå‘ç°å®ƒæ„ä¹‰éå¸¸çš„ç®€å•ã€‚</p>
<p><strong>Description</strong>ï¼šç”¨äºç»™å‡ºå½“å‰æœåŠ¡çš„ç®€å•æè¿°ã€‚é€šå¸¸æˆ‘ä»¬æŸ¥çœ‹æœåŠ¡çŠ¶æ€æ—¶ï¼Œéƒ½ä¼šåœ¨ç¬¬ä¸€è¡Œçœ‹åˆ°è¿™ä¹ˆä¸€å¥è¯ï¼š</p>
<pre><button type="button" class="chakra-button css-19bp9bt">COPY</button><code class="hljs language-arduino">httpd.service - The Apache HTTP <span class="hljs-built_in">Server</span>
</code></pre>
<p>è¿™å°±æ˜¯<code>Descipton</code>å­—æ®µçš„ä½œç”¨ï¼Œä¸€å¥è¯å¯¹å½“å‰æœåŠ¡çš„ç®€å•ä»‹ç»ã€‚</p>
<p><strong>After</strong>ï¼šè¯¥å­—æ®µæ˜¯æœ‰å…³äºå¯åŠ¨é¡ºåºçš„å­—æ®µï¼Œä»å­—é¢æ„æ€æˆ‘ä»¬å°±åº”è¯¥å¤§æ¦‚äº†è§£åˆ°ï¼Œè¿™ä¸ªå€¼åº”è¯¥æ˜¯å®šä¹‰å½“å‰æœåŠ¡åº”è¯¥å¯åŠ¨åœ¨å“ªäº›æœåŠ¡ä¹‹åã€‚</p>
<p>ä¸Šè¿°é…ç½®æ–‡ä»¶è¯¥å€¼è§£é‡Šå°±æ˜¯ï¼šå½“<code>network.target remote-fs.target nss-lookup.target</code>è¿™äº›æœåŠ¡éœ€è¦å¯åŠ¨ï¼Œé‚£ä¹ˆå½“å‰çš„<code>httpd.service</code>åº”è¯¥åœ¨ä»–ä»¬ä¹‹åå¯åŠ¨ã€‚</p>
<p>ç›¸å¯¹çš„ï¼Œå’Œ<code>After</code>å¯¹åº”çš„è¿˜æœ‰ä¸ª<code>Before</code>å­—æ®µã€‚äº†è§£äº†<code>After</code>è¿™ä¸ª<code>Before</code>å°±åº”è¯¥å¾ˆå®¹æ˜“ç†è§£äº†ã€‚å®Œå…¨å’Œ<code>After</code>ç›¸å¯¹çš„æ„æ€ï¼Œå®šä¹‰<code>httpd.service</code>åº”è¯¥åœ¨å“ªäº›æœåŠ¡ä¹‹å‰å¯åŠ¨ã€‚</p>
<p>Afterå’ŒBeforeåªå…³ä¹åˆ°æœåŠ¡çš„å¯åŠ¨é¡ºåºï¼Œå¹¶ä¸å…³ä¹åˆ°ä¾èµ–å…³ç³»ã€‚</p>
<p><strong>Documentation</strong>ï¼šè¯¥å­—æ®µæ¯”è¾ƒç®€å•ï¼Œå’Œ<code>Descripton</code>ä½œç”¨å·®ä¸å¤šã€‚å®ƒçš„å€¼ç”¨äºç»™å‡ºå½“å‰æœåŠ¡çš„æ–‡æ¡£çš„ä½ç½®ã€‚</p>
<p>å½“å‰é…ç½®æ–‡ä»¶ä¸­å¹¶æ²¡æœ‰è¯´æ˜ä¾èµ–å…³ç³»çš„å­—æ®µã€‚ä¾èµ–å…³ç³»å’Œå¯åŠ¨é¡ºåºéƒ½æ˜¯å†™åœ¨å½“å‰è¿™ä¸ªUnitåŒºåŸŸçš„ï¼Œå®ƒä¿©éå¸¸åƒè±¡ï¼Œä½†æ˜¯ä½œç”¨ä¸åŒã€‚</p>
<p>ä¾èµ–å…³ç³»æœ‰ä¸¤ä¸ªå­—æ®µè¿›è¡Œæ§åˆ¶ï¼š<code>Wants</code>å’Œ<code>Requiers</code>ã€‚</p>
<p><strong>Wants</strong>ï¼šè¡¨ç¤ºå¼±ä¾èµ–å…³ç³»ï¼Œå³ä½¿è¯¥å€¼å†…çš„æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œä¹Ÿä¸å½±å“å½“å‰æœåŠ¡çš„ç»§ç»­è¿è¡Œã€‚</p>
<p><strong>Requires</strong>ï¼šè¡¨ç¤ºå¼ºä¾èµ–å…³ç³»ï¼Œå¦‚æœè¯¥å€¼å†…çš„æœåŠ¡æ— æ³•è¿è¡Œï¼Œé‚£ä¹ˆå½“å‰æœåŠ¡ä¹Ÿå°†åœæ­¢ã€‚</p>
<p>æ‰“ä¸ªæ¯”æ–¹ï¼š</p>
<p>å½“å‰çš„httpd.serviceéœ€è¦ä¾èµ–mysqlæ¥å­˜å‚¨æ•°æ®ã€‚å¦‚æœåœ¨é…ç½®æ–‡ä»¶ä¸­å®ƒåªå®šä¹‰äº†åœ¨mysqlä¹‹åå¯åŠ¨ã€‚è€Œæ²¡å®šä¹‰ä¾èµ–å…³ç³»ï¼Œé‚£ä¹ˆå½“mysqlå‡ºç°é”™è¯¯åœæ­¢æ—¶ï¼Œåœ¨é‡æ–°å¯åŠ¨æœŸé—´ï¼Œå½“å‰çš„httpdå°†æ— æ³•ä¸mysqlå»ºç«‹é“¾æ¥ã€‚</p>
<p><strong>è¿™é‡Œåªæ˜¯æ‰“ä¸ªæ¯”æ–¹å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„äº†è§£ï¼Œå®é™…æƒ…å†µä¸‹httpdåœ¨é€šå¸¸å’Œmysqlæ˜¯æ²¡æœ‰è¿™æ ·çš„ä¾èµ–å…³ç³»çš„ğŸ¥ã€‚</strong></p>
<h3 id="serviceåŒºåŸŸ">ServiceåŒºåŸŸ</h3>
<p>ServiceåŒºåŸŸæ˜¯ä¸»è¦çš„ä¸€éƒ¨åˆ†ï¼Œä¸»è¦æ§åˆ¶è½¯ä»¶çš„å¯åŠ¨åœæ­¢ç­‰ï¼Œéƒ½æ˜¯åœ¨æ­¤éƒ¨åˆ†å£°æ˜çš„ã€‚ä¹Ÿå°±æ˜¯å®šä¹‰äº†å¦‚ä½•å¯åŠ¨å½“å‰çš„æœåŠ¡ã€‚</p>
<p>è®¸å¤šè½¯ä»¶éƒ½æœ‰ç¯å¢ƒå‚æ•°æ–‡ä»¶ï¼Œä½¿ç”¨<code>EnvironmentFile</code>å­—æ®µä¾¿å¯ä»¥å®šä¹‰ç¯å¢ƒå‚æ•°ã€‚</p>
<p><code>EnvironmentFile</code>å­—æ®µï¼šæŒ‡å®šå½“å‰æœåŠ¡çš„ç¯å¢ƒå‚æ•°æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶å†…éƒ¨çš„<code>key=value</code>é”®å€¼å¯¹ï¼Œå¯ä»¥ç”¨<code>$key</code>çš„å½¢å¼ï¼Œåœ¨å½“å‰é…ç½®æ–‡ä»¶ä¸­è·å–ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¯åŠ¨<code>sshd</code>ï¼Œæ‰§è¡Œçš„å‘½ä»¤æ˜¯<code>/usr/sbin/sshd -D $OPTIONS</code>ï¼Œå…¶ä¸­çš„å˜é‡<code>$OPTIONS</code>å°±æ¥è‡ª<code>EnvironmentFile</code>å­—æ®µæŒ‡å®šçš„ç¯å¢ƒå‚æ•°æ–‡ä»¶ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼ŒServiceåŒºåŸŸè¿˜æœ‰ä¸€äº›å…³äºæ§åˆ¶è½¯ä»¶è¡Œä¸ºçš„ä¸€äº›å­—æ®µï¼š</p>
<ul>
<li><code>ExecStart</code>å­—æ®µï¼šå®šä¹‰å¯åŠ¨è¿›ç¨‹æ—¶æ‰§è¡Œçš„å‘½ä»¤ã€‚</li>
</ul>
<ul>
<li><code>ExecReload</code>å­—æ®µï¼šé‡å¯æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤</li>
<li><code>ExecStop</code>å­—æ®µï¼šåœæ­¢æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤</li>
<li><code>ExecStartPre</code>å­—æ®µï¼šå¯åŠ¨æœåŠ¡ä¹‹å‰æ‰§è¡Œçš„å‘½ä»¤</li>
<li><code>ExecStartPost</code>å­—æ®µï¼šå¯åŠ¨æœåŠ¡ä¹‹åæ‰§è¡Œçš„å‘½ä»¤</li>
<li><code>ExecStopPost</code>å­—æ®µï¼šåœæ­¢æœåŠ¡ä¹‹åæ‰§è¡Œçš„å‘½ä»¤</li>
</ul>
<p>æ‰€æœ‰çš„å¯åŠ¨è®¾ç½®ä¹‹å‰ï¼Œéƒ½å¯ä»¥åŠ ä¸Šä¸€ä¸ªè¿è¯å·ï¼ˆ<code>-</code>ï¼‰ï¼Œè¡¨ç¤º&quot;æŠ‘åˆ¶é”™è¯¯&quot;ï¼Œå³å‘ç”Ÿé”™è¯¯çš„æ—¶å€™ï¼Œä¸å½±å“å…¶ä»–å‘½ä»¤çš„æ‰§è¡Œã€‚æ¯”å¦‚ï¼Œ<code>EnvironmentFile=-/etc/sysconfig/sshd</code>ï¼ˆæ³¨æ„ç­‰å·åé¢çš„é‚£ä¸ªè¿è¯å·ï¼‰ï¼Œå°±è¡¨ç¤ºå³ä½¿<code>/etc/sysconfig/sshd</code>æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¹Ÿä¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p>
<p>æ­¤å¤–ï¼ŒServiceä¸­è¿˜æœ‰å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„å­—æ®µ</p>
<p><strong>Type</strong>å­—æ®µï¼Œå®ƒæœ‰å¦‚ä¸‹ä¸€äº›å€¼ï¼š</p>
<ul>
<li>simpleï¼ˆé»˜è®¤å€¼ï¼‰ï¼š<code>ExecStart</code>å­—æ®µå¯åŠ¨çš„è¿›ç¨‹ä¸ºä¸»è¿›ç¨‹</li>
<li>forkingï¼š<code>ExecStart</code>å­—æ®µå°†ä»¥<code>fork()</code>æ–¹å¼å¯åŠ¨ï¼Œæ­¤æ—¶çˆ¶è¿›ç¨‹å°†ä¼šé€€å‡ºï¼Œå­è¿›ç¨‹å°†æˆä¸ºä¸»è¿›ç¨‹</li>
<li>oneshotï¼šç±»ä¼¼äº<code>simple</code>ï¼Œä½†åªæ‰§è¡Œä¸€æ¬¡ï¼ŒSystemd ä¼šç­‰å®ƒæ‰§è¡Œå®Œï¼Œæ‰å¯åŠ¨å…¶ä»–æœåŠ¡</li>
<li>dbusï¼šç±»ä¼¼äº<code>simple</code>ï¼Œä½†ä¼šç­‰å¾… D-Bus ä¿¡å·åå¯åŠ¨</li>
<li>notifyï¼šç±»ä¼¼äº<code>simple</code>ï¼Œå¯åŠ¨ç»“æŸåä¼šå‘å‡ºé€šçŸ¥ä¿¡å·ï¼Œç„¶å Systemd å†å¯åŠ¨å…¶ä»–æœåŠ¡</li>
<li>idleï¼šç±»ä¼¼äº<code>simple</code>ï¼Œä½†æ˜¯è¦ç­‰åˆ°å…¶ä»–ä»»åŠ¡éƒ½æ‰§è¡Œå®Œï¼Œæ‰ä¼šå¯åŠ¨è¯¥æœåŠ¡ã€‚ä¸€ç§ä½¿ç”¨åœºåˆæ˜¯ä¸ºè®©è¯¥æœåŠ¡çš„è¾“å‡ºï¼Œä¸ä¸å…¶ä»–æœåŠ¡çš„è¾“å‡ºç›¸æ··åˆ</li>
</ul>
<h3 id="installåŒºåŸŸ">InstallåŒºåŸŸ</h3>
<p><code>Install</code>åŒºå—ï¼Œå®šä¹‰å¦‚ä½•å®‰è£…è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œå³æ€æ ·åšåˆ°å¼€æœºå¯åŠ¨ã€‚</p>
<p><code>WantedBy</code>å­—æ®µï¼šè¡¨ç¤ºè¯¥æœåŠ¡æ‰€åœ¨çš„ Targetã€‚</p>
<p><code>Target</code>çš„å«ä¹‰æ˜¯æœåŠ¡ç»„ï¼Œè¡¨ç¤ºä¸€ç»„æœåŠ¡ã€‚<code>WantedBy=multi-user.target</code>æŒ‡çš„æ˜¯ï¼Œsshd æ‰€åœ¨çš„ Target æ˜¯<code>multi-user.target</code>ã€‚</p>
<p>è¿™ä¸ªè®¾ç½®éå¸¸é‡è¦ï¼Œå› ä¸ºæ‰§è¡Œ<code>systemctl enable sshd.service</code>å‘½ä»¤æ—¶ï¼Œ<code>sshd.service</code>çš„ä¸€ä¸ªç¬¦å·é“¾æ¥ï¼Œå°±ä¼šæ”¾åœ¨<code>/etc/systemd/system</code>ç›®å½•ä¸‹é¢çš„<code>multi-user.target.wants</code>å­ç›®å½•ä¹‹ä¸­ã€‚</p>
<p>Systemd æœ‰é»˜è®¤çš„å¯åŠ¨ Targetã€‚</p>
<pre><button type="button" class="chakra-button css-19bp9bt">COPY</button><code class="hljs language-bash">$ systemctl get-default
multi-user.target
</code></pre>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œå¸¸ç”¨çš„ Target æœ‰ä¸¤ä¸ªï¼šä¸€ä¸ªæ˜¯<code>multi-user.target</code>ï¼Œè¡¨ç¤ºå¤šç”¨æˆ·å‘½ä»¤è¡ŒçŠ¶æ€ï¼›å¦ä¸€ä¸ªæ˜¯<code>graphical.target</code>ï¼Œè¡¨ç¤ºå›¾å½¢ç”¨æˆ·çŠ¶æ€ï¼Œå®ƒä¾èµ–äº<code>multi-user.target</code>ã€‚å®˜æ–¹æ–‡æ¡£æœ‰ä¸€å¼ éå¸¸æ¸…æ™°çš„ [Target ä¾èµ–å…³ç³»å›¾](<a target="_blank" rel="noopener noreferrer" class="chakra-link css-wox0k7" href="https://www.freedesktop.org/software/systemd/man/bootup.html#System">https://www.freedesktop.org/software/systemd/man/bootup.html#System<svg viewBox="0 0 24 24" focusable="false" class="chakra-icon css-2y6psj"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><path d="M15 3h6v6"></path><path d="M10 14L21 3"></path></g></svg></a> Manager Bootup)ã€‚</p>
<p>Target ä¹Ÿæœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚</p>
<pre><button type="button" class="chakra-button css-19bp9bt">COPY</button><code class="hljs language-bash">$ systemctl <span class="hljs-built_in">cat</span> multi-user.target

[Unit]
Description=Multi-User System
Documentation=man:systemd.special(7)
Requires=basic.target
Conflicts=rescue.service rescue.target
After=basic.target rescue.service rescue.target
AllowIsolate=<span class="hljs-built_in">yes</span>
</code></pre>
<h2 id="è¯¦ç»†çš„å­—æ®µè§£é‡Š">è¯¦ç»†çš„å­—æ®µè§£é‡Š</h2>
<pre><button type="button" class="chakra-button css-19bp9bt">COPY</button><code class="hljs language-ini"><span class="hljs-section">[Unit]</span>
Description : æœåŠ¡çš„ç®€å•æè¿°
Documentation ï¼š æœåŠ¡æ–‡æ¡£
Beforeã€After:å®šä¹‰å¯åŠ¨é¡ºåºã€‚<span class="hljs-attr">Before</span>=xxx.service,ä»£è¡¨æœ¬æœåŠ¡åœ¨xxx.serviceå¯åŠ¨ä¹‹å‰å¯åŠ¨ã€‚After=xxx.service,ä»£è¡¨æœ¬æœåŠ¡åœ¨xxx.serviceä¹‹åå¯åŠ¨ã€‚
Requiresï¼šè¿™ä¸ªå•å…ƒå¯åŠ¨äº†ï¼Œå®ƒéœ€è¦çš„å•å…ƒä¹Ÿä¼šè¢«å¯åŠ¨ï¼›å®ƒéœ€è¦çš„å•å…ƒè¢«åœæ­¢äº†ï¼Œè¿™ä¸ªå•å…ƒä¹Ÿåœæ­¢äº†ã€‚
Wantsï¼šæ¨èä½¿ç”¨ã€‚è¿™ä¸ªå•å…ƒå¯åŠ¨äº†ï¼Œå®ƒéœ€è¦çš„å•å…ƒä¹Ÿä¼šè¢«å¯åŠ¨ï¼›å®ƒéœ€è¦çš„å•å…ƒè¢«åœæ­¢äº†ï¼Œå¯¹æœ¬å•å…ƒæ²¡æœ‰å½±å“ã€‚
</code></pre>
<pre><button type="button" class="chakra-button css-19bp9bt">COPY</button><code class="hljs language-ini"><span class="hljs-section">[Service]</span>
<span class="hljs-attr">Type</span>=simpleï¼ˆé»˜è®¤å€¼ï¼‰ï¼šsystemdè®¤ä¸ºè¯¥æœåŠ¡å°†ç«‹å³å¯åŠ¨ã€‚æœåŠ¡è¿›ç¨‹ä¸ä¼šforkã€‚å¦‚æœè¯¥æœåŠ¡è¦å¯åŠ¨å…¶ä»–æœåŠ¡ï¼Œä¸è¦ä½¿ç”¨æ­¤ç±»å‹å¯åŠ¨ï¼Œé™¤éè¯¥æœåŠ¡æ˜¯socketæ¿€æ´»å‹ã€‚
<span class="hljs-attr">Type</span>=forkingï¼šsystemdè®¤ä¸ºå½“è¯¥æœåŠ¡è¿›ç¨‹forkï¼Œä¸”çˆ¶è¿›ç¨‹é€€å‡ºåæœåŠ¡å¯åŠ¨æˆåŠŸã€‚å¯¹äºå¸¸è§„çš„å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰ï¼Œé™¤éä½ ç¡®å®šæ­¤å¯åŠ¨æ–¹å¼æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œä½¿ç”¨æ­¤ç±»å‹å¯åŠ¨å³å¯ã€‚ä½¿ç”¨æ­¤å¯åŠ¨ç±»å‹åº”åŒæ—¶æŒ‡å®š PIDFile=ï¼Œä»¥ä¾¿systemdèƒ½å¤Ÿè·Ÿè¸ªæœåŠ¡çš„ä¸»è¿›ç¨‹ã€‚
<span class="hljs-attr">Type</span>=<span class="hljs-literal">on</span>eshotï¼šè¿™ä¸€é€‰é¡¹é€‚ç”¨äºåªæ‰§è¡Œä¸€é¡¹ä»»åŠ¡ã€éšåç«‹å³é€€å‡ºçš„æœåŠ¡ã€‚å¯èƒ½éœ€è¦åŒæ—¶è®¾ç½® RemainAfterExit=<span class="hljs-literal">yes</span> ä½¿å¾— systemd åœ¨æœåŠ¡è¿›ç¨‹é€€å‡ºä¹‹åä»ç„¶è®¤ä¸ºæœåŠ¡å¤„äºæ¿€æ´»çŠ¶æ€ã€‚
<span class="hljs-attr">Type</span>=notifyï¼šä¸ Type=simple ç›¸åŒï¼Œä½†çº¦å®šæœåŠ¡ä¼šåœ¨å°±ç»ªåå‘ systemd å‘é€ä¸€ä¸ªä¿¡å·ã€‚è¿™ä¸€é€šçŸ¥çš„å®ç°ç”± libsystemd-daemon.so æä¾›ã€‚
<span class="hljs-attr">Type</span>=dbusï¼šè‹¥ä»¥æ­¤æ–¹å¼å¯åŠ¨ï¼Œå½“æŒ‡å®šçš„ BusName å‡ºç°åœ¨DBusç³»ç»Ÿæ€»çº¿ä¸Šæ—¶ï¼Œsystemdè®¤ä¸ºæœåŠ¡å°±ç»ªã€‚
<span class="hljs-attr">Type</span>=idle: systemdä¼šç­‰å¾…æ‰€æœ‰ä»»åŠ¡(Jobs)å¤„ç†å®Œæˆåï¼Œæ‰å¼€å§‹æ‰§è¡Œidleç±»å‹çš„å•å…ƒã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå…¶ä»–è¡Œä¸ºå’ŒType=simple ç±»ä¼¼ã€‚
PIDFileï¼špidæ–‡ä»¶è·¯å¾„
ExecStartPreï¼šåœæ­¢æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤
ExecStartï¼šæŒ‡å®šå¯åŠ¨å•å…ƒçš„å‘½ä»¤æˆ–è€…è„šæœ¬ï¼ŒExecStartPreå’ŒExecStartPostèŠ‚æŒ‡å®šåœ¨ExecStartä¹‹å‰æˆ–è€…ä¹‹åç”¨æˆ·è‡ªå®šä¹‰æ‰§è¡Œçš„è„šæœ¬ã€‚<span class="hljs-attr">Type</span>=<span class="hljs-literal">on</span>eshotå…è®¸æŒ‡å®šå¤šä¸ªå¸Œæœ›é¡ºåºæ‰§è¡Œçš„ç”¨æˆ·è‡ªå®šä¹‰å‘½ä»¤ã€‚
ExecReloadï¼šæŒ‡å®šå•å…ƒåœæ­¢æ—¶æ‰§è¡Œçš„å‘½ä»¤æˆ–è€…è„šæœ¬ã€‚
ExecStopï¼šæŒ‡å®šå•å…ƒåœæ­¢æ—¶æ‰§è¡Œçš„å‘½ä»¤æˆ–è€…è„šæœ¬ã€‚
ExecStopPostï¼šåœæ­¢æœåŠ¡ä¹‹åæ‰§è¡Œçš„å‘½ä»¤
ExecStartPostï¼šå¯åŠ¨æœåŠ¡ä¹‹åæ‰§è¡Œçš„å‘½ä»¤
PrivateTmpï¼šTrueè¡¨ç¤ºç»™æœåŠ¡åˆ†é…ç‹¬ç«‹çš„ä¸´æ—¶ç©ºé—´
Restartï¼šè¿™ä¸ªé€‰é¡¹å¦‚æœè¢«å…è®¸ï¼ŒæœåŠ¡é‡å¯çš„æ—¶å€™è¿›ç¨‹ä¼šé€€å‡ºï¼Œä¼šé€šè¿‡systemctlå‘½ä»¤æ‰§è¡Œæ¸…é™¤å¹¶é‡å¯çš„æ“ä½œã€‚
RemainAfterExitï¼šå¦‚æœè®¾ç½®è¿™ä¸ªé€‰æ‹©ä¸ºçœŸï¼ŒæœåŠ¡ä¼šè¢«è®¤ä¸ºæ˜¯åœ¨æ¿€æ´»çŠ¶æ€ï¼Œå³ä½¿æ‰€ä»¥çš„è¿›ç¨‹å·²ç»é€€å‡ºï¼Œé»˜è®¤çš„å€¼ä¸ºå‡ï¼Œè¿™ä¸ªé€‰é¡¹åªæœ‰åœ¨<span class="hljs-attr">Type</span>=<span class="hljs-literal">on</span>eshotæ—¶éœ€è¦è¢«é…ç½®ã€‚
</code></pre>
<pre><button type="button" class="chakra-button css-19bp9bt">COPY</button><code class="hljs language-csharp">[<span class="hljs-meta">Install</span>]
Aliasï¼šä¸ºå•å…ƒæä¾›ä¸€ä¸ªç©ºé—´åˆ†ç¦»çš„é™„åŠ åå­—ã€‚
RequiredByï¼šå•å…ƒè¢«å…è®¸è¿è¡Œéœ€è¦çš„ä¸€ç³»åˆ—ä¾èµ–å•å…ƒï¼ŒRequiredByåˆ—è¡¨ä»Requireè·å¾—ä¾èµ–ä¿¡æ¯ã€‚
WantByï¼šå•å…ƒè¢«å…è®¸è¿è¡Œéœ€è¦çš„å¼±ä¾èµ–æ€§å•å…ƒï¼ŒWantbyä»Wantåˆ—è¡¨è·å¾—ä¾èµ–ä¿¡æ¯ã€‚
Alsoï¼šæŒ‡å‡ºå’Œå•å…ƒä¸€èµ·å®‰è£…æˆ–è€…è¢«ååŠ©çš„å•å…ƒã€‚
DefaultInstanceï¼šå®ä¾‹å•å…ƒçš„é™åˆ¶ï¼Œè¿™ä¸ªé€‰é¡¹æŒ‡å®šå¦‚æœå•å…ƒè¢«å…è®¸è¿è¡Œé»˜è®¤çš„å®ä¾‹ã€‚
</code></pre>
<h2 id="é‡å¯">é‡å¯</h2>
<pre><button type="button" class="chakra-button css-19bp9bt">COPY</button><code class="hljs language-bash"><span class="hljs-comment"># é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶</span>
$ sudo systemctl daemon-reload

<span class="hljs-comment"># é‡å¯ç›¸å…³æœåŠ¡</span>
$ sudo systemctl restart foobar
</code></pre></section></article></div><style data-emotion="css 1i6v8fa">.css-1i6v8fa{min-height:346px;}@media screen and (min-width: 30em){.css-1i6v8fa{min-height:350px;}}</style><div class="css-1i6v8fa"></div><style data-emotion="css 3ydw18">.css-3ydw18{height:3px;width:50px;background:var(--chakra-colors-gray-500);border-radius:var(--chakra-radii-xl);margin-top:2.5rem;}</style><div class="css-3ydw18"></div><style data-emotion="css 1lwvw50">.css-1lwvw50{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-flow:column;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;padding-top:1.5rem;padding-bottom:1.5rem;}</style><footer class="css-1lwvw50"><style data-emotion="css yld109">.css-yld109{color:var(--chakra-colors-gray-600);font-weight:var(--chakra-fontWeights-bold);margin-bottom:0.5rem;}</style><p class="chakra-text css-yld109">Â©<!-- -->2022<!-- --> å°è‚¥ç¾Š</p><style data-emotion="css 3eyczr">.css-3eyczr{color:var(--chakra-colors-gray-400);font-size:small;}</style><p class="chakra-text css-3eyczr">Powered by Next.js â¤ï¸ Chakra UI</p></footer></div><style data-emotion="css kl7qz4">.css-kl7qz4{display:none;position:-webkit-sticky;position:sticky;top:3rem;margin-top:3rem;}@media screen and (min-width: 30em){.css-kl7qz4{display:none;}}@media screen and (min-width: 48em){.css-kl7qz4{display:none;}}@media screen and (min-width: 62em){.css-kl7qz4{display:block;}}</style><div class="css-kl7qz4"><h2 id="table-of-contents">Table of contents</h2>
<ul>
<li>
<p><a class="chakra-link css-wox0k7" href="#%E4%BB%80%E4%B9%88%E6%98%AFsystemd">ä»€ä¹ˆæ˜¯systemdï¼Ÿ</a></p>
</li>
<li>
<p><a class="chakra-link css-wox0k7" href="#%E5%AD%A6%E4%B9%A0%E5%AE%83%E7%9A%84%E4%BD%9C%E7%94%A8">å­¦ä¹ å®ƒçš„ä½œç”¨ï¼Ÿ</a></p>
</li>
<li>
<p><a class="chakra-link css-wox0k7" href="#%E5%BC%80%E6%9C%BA%E8%BF%90%E8%A1%8C%E5%90%AF%E5%8A%A8%E7%9A%84%E5%8E%9F%E7%90%86">å¼€æœºè¿è¡Œå¯åŠ¨çš„åŸç†</a></p>
</li>
<li>
<p><a class="chakra-link css-wox0k7" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">é…ç½®æ–‡ä»¶</a></p>
<ul>
<li><a class="chakra-link css-wox0k7" href="#unit%E5%8C%BA%E5%9F%9F">UnitåŒºåŸŸ</a></li>
<li><a class="chakra-link css-wox0k7" href="#service%E5%8C%BA%E5%9F%9F">ServiceåŒºåŸŸ</a></li>
<li><a class="chakra-link css-wox0k7" href="#install%E5%8C%BA%E5%9F%9F">InstallåŒºåŸŸ</a></li>
</ul>
</li>
<li>
<p><a class="chakra-link css-wox0k7" href="#%E8%AF%A6%E7%BB%86%E7%9A%84%E5%AD%97%E6%AE%B5%E8%A7%A3%E9%87%8A">è¯¦ç»†çš„å­—æ®µè§£é‡Š</a></p>
</li>
<li>
<p><a class="chakra-link css-wox0k7" href="#%E9%87%8D%E5%90%AF">é‡å¯</a></p>
</li>
</ul></div></div><span></span></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"basic-knowledge-of-systemd","content":"\n## ä»€ä¹ˆæ˜¯systemdï¼Ÿ\n\nSystemdæ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ä¸€äº›Linuxå‘è¡Œç‰ˆä¸­å¸¸è§çš„ä¸€å¥—ä¸­å¤®åŒ–ç³»ç»ŸåŠè®¾ç½®ç®¡ç†ç¨‹åº(init)ï¼ŒåŒ…æ‹¬æœ‰[å®ˆæŠ¤è¿›ç¨‹](https://zh.wikipedia.org/wiki/%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B)ã€[ç¨‹åºåº“](https://zh.wikipedia.org/wiki/%E7%A8%8B%E5%BC%8F%E5%BA%AB)ä»¥åŠåº”ç”¨è½¯ä»¶ã€‚\n\næˆ‘ä»¬ç»å¸¸ä½¿ç”¨`systemctl start apache2`æ¥å¯åŠ¨ä¸€äº›æœåŠ¡æˆ–è€…åº”ç”¨è½¯ä»¶æ—¶ï¼Œä½¿ç”¨åˆ°çš„å°±æ˜¯Systemdçš„ä¸€éƒ¨åˆ†ã€‚\n\nå½“å‰ç»å¤§å¤šæ•°çš„Linuxå‘è¡Œç‰ˆéƒ½å·²é‡‡ç”¨systemdä»£æ›¿åŸæ¥çš„[System V](https://zh.wikipedia.org/wiki/UNIX_System_V)ã€‚\n\n## å­¦ä¹ å®ƒçš„ä½œç”¨ï¼Ÿ\n\nå®ƒèƒ½å¤Ÿæ–¹ä¾¿çš„å¯¹ä¸€äº›è½¯ä»¶è¿è¡Œè¿›è¡Œç®¡ç†ï¼Œç»å¸¸ä½¿ç”¨`systemctl`çš„åŒå­¦ä»¬å¯èƒ½ä¼šæ¯”è¾ƒäº†è§£ï¼Œè­¬å¦‚æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ï¼Œè®¾ç½®å¼€æœºè‡ªå¯ç­‰æ“ä½œã€‚\n\næœ€è¿‘å°é²œäº†Ubuntuï¼Œä½†æ˜¯é‡åˆ°ä¸ªæ–°çš„é—®é¢˜ã€‚åœ¨Ubuntu 18.10ä¸­ï¼Œå·²ç»å°†ä»¥å‰çš„å¼€æœºè‡ªå¯åŠ¨çš„è„šæœ¬`/etc/rc.local`å»æ‰äº†ã€‚æ— æ„ä¸­çœ‹åˆ°ä½¿ç”¨systemdæ¥æ§åˆ¶å¼€æœºè‡ªå¯åº”ç”¨ç¨‹åºã€‚\n\nåæ¥å°±é¡ºä¾¿å°è¯•è¿›ä¸€æ­¥äº†è§£ä¸€ä¸‹systemdï¼Œæ¯•ç«Ÿè¿˜æ˜¯æ¯”è¾ƒæœ‰ç”¨çš„ã€‚\n\n## å¼€æœºè¿è¡Œå¯åŠ¨çš„åŸç†\n\nä¸€äº›æ”¯æŒsystemdçš„è½¯ä»¶ï¼Œåœ¨å®‰è£…æ—¶ä¼šåœ¨`/usr/lib/systemd/system`ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ªæ”¯æŒsystemdçš„é…ç½®æ–‡ä»¶ã€‚å½“æˆ‘ä»¬ä½¿ç”¨`systemctl enable apache2`æ—¶ï¼Œå°±ç›¸å½“äºå°†`/usr/lib/systemd/system`ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶æ·»åŠ ä¸€ä¸ªç¬¦å·é“¾æ¥ï¼Œé“¾æ¥åˆ°`/etc/systemd/system`ç›®å½•ã€‚\n\nå½“æˆ‘ä»¬çš„ç³»ç»Ÿå¼€æœºæ—¶ï¼Œsystemdä¼šæ‰§è¡Œ`/etc/systemd/system`ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ï¼Œä»¥è¾¾åˆ°å¼€æœºè‡ªå¯çš„æ•ˆæœã€‚\n\næœ€è¿‘å‘ç°å½“å‰è¾ƒæ–°çš„å‘è¡Œç‰ˆï¼Œä½¿ç”¨enableå‘½ä»¤æ—¶ï¼Œåˆ›å»ºçš„é“¾æ¥ç›®å½•ä¸ºï¼š\n\n```\n~ systemctl enable httpd             \nCreated symlink from /etc/systemd/system/multi-user.target.wants/httpd.service to /usr/lib/systemd/system/httpd.service.\n```\n\n## é…ç½®æ–‡ä»¶\n\nå‡ æ¡å¸¸ç”¨ä¸”ç†Ÿæ‚‰çš„sysemctlçš„å‘½ä»¤è¿™é‡Œå°±ä¸åœ¨è¯¦ç»†ä»‹ç»äº†ã€‚è¿™é‡Œç›´æ¥äº†è§£ä¸€ä¸‹æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œé…ç½®æ–‡ä»¶ã€‚\n\næ—©åœ¨å¾ˆä¹…ä»¥å‰ï¼Œå¯¹äº[Nyncat](https://www.defectink.com/defect/12.html)è¿™ç¯‡æ–‡ç« ï¼Œé‡Œé¢å°±ä½¿ç”¨åˆ°è‡ªå·±ç¼–å†™systemdçš„é…ç½®æ–‡ä»¶æ¥è¾¾åˆ°å¯¹nyancatè¿™ä¸ªæœåŠ¡çš„è¯¦ç»†æ§åˆ¶ã€‚ï¼ˆè™½ç„¶å½“æ—¶æˆ‘ä¸ç†è§£é…ç½®æ–‡ä»¶è¯´çš„å•¥â€¦\n\nä¸Šè¿°äº†è§£åˆ°ï¼Œé…ç½®æ–‡ä»¶ä¸€èˆ¬æƒ…å†µä¸‹å‡ºç°åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼š`/usr/lib/systemd/system`ç›®å½•å’Œ`/etc/systemd/system/multi-user.target.wants`ç›®å½•ã€‚å¯¹äºå®Œå…¨ä¸äº†è§£é…ç½®æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆåœ¨è¿™ä¸¤ä¸ªç›®å½•æ‰¾ä¸ªæ¡ˆä¾‹äº†è§£ä¸€ä¸‹ã€‚\n\n**æŸäº›Ubuntuçš„å‘è¡Œç‰ˆå¯èƒ½åœ¨`/lib/systemd/system`ç›®å½•ä¸‹ä¿å­˜é…ç½®æ–‡ä»¶**\n\nä¾‹å¦‚ï¼ŒCentOSçš„httpdï¼š\n\n```\n[Unit]\nDescription=The Apache HTTP Server\nAfter=network.target remote-fs.target nss-lookup.target\nDocumentation=man:httpd(8)\nDocumentation=man:apachectl(8)\n\n[Service]\nType=notify\nEnvironmentFile=/etc/sysconfig/httpd\nExecStart=/usr/sbin/httpd $OPTIONS -DFOREGROUND\nExecReload=/usr/sbin/httpd $OPTIONS -k graceful\nExecStop=/bin/kill -WINCH ${MAINPID}\n# We want systemd to give httpd some time to finish gracefully, but still want\n# it to kill httpd after TimeoutStopSec if something went wrong during the\n# graceful stop. Normally, Systemd sends SIGTERM signal right after the\n# ExecStop, which would kill httpd. We are sending useless SIGCONT here to give\n# httpd time to finish.\nKillSignal=SIGCONT\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n```\n\næˆ‘ä»¬å¯ä»¥äº†è§£åˆ°ï¼Œå®ƒåŸºæœ¬ä¸Šåˆ†ä¸ºä¸‰ä¸ªåŒºå—ï¼š`Unit`ã€`Service`å’Œ`Install`åŒºå—ã€‚\n\n### UnitåŒºåŸŸ\n\nUnitåŒºåŸŸç”¨äºè§£é‡Šå¯åŠ¨é¡ºåºä¸ä¾èµ–å…³ç³»ã€‚å¯ä»¥ç›´è§‚çš„çœ‹åˆ°å®ƒæœ‰å‡ ä¸ªå­—æ®µï¼š\n\n- Description\n- After\n- Documentation\n\nç¬¬ä¸€çœ¼çœ‹ä¸Šå»å¯èƒ½éƒ½æ˜¯æ¯”è¾ƒä¹±ä¸ƒå…«ç³Ÿçš„ï¼Œæ ¹æœ¬ä¸çŸ¥é“å®ƒåœ¨è¯´å•¥ã€‚ä½†æ˜¯æˆ‘ä»¬æ‹†å¼€æ¥ä¸€ä¸ªä¸€ä¸ªäº†è§£ï¼Œå°±ä¼šå‘ç°å®ƒæ„ä¹‰éå¸¸çš„ç®€å•ã€‚\n\n**Description**ï¼šç”¨äºç»™å‡ºå½“å‰æœåŠ¡çš„ç®€å•æè¿°ã€‚é€šå¸¸æˆ‘ä»¬æŸ¥çœ‹æœåŠ¡çŠ¶æ€æ—¶ï¼Œéƒ½ä¼šåœ¨ç¬¬ä¸€è¡Œçœ‹åˆ°è¿™ä¹ˆä¸€å¥è¯ï¼š\n\n```\nhttpd.service - The Apache HTTP Server\n```\n\nè¿™å°±æ˜¯`Descipton`å­—æ®µçš„ä½œç”¨ï¼Œä¸€å¥è¯å¯¹å½“å‰æœåŠ¡çš„ç®€å•ä»‹ç»ã€‚\n\n**After**ï¼šè¯¥å­—æ®µæ˜¯æœ‰å…³äºå¯åŠ¨é¡ºåºçš„å­—æ®µï¼Œä»å­—é¢æ„æ€æˆ‘ä»¬å°±åº”è¯¥å¤§æ¦‚äº†è§£åˆ°ï¼Œè¿™ä¸ªå€¼åº”è¯¥æ˜¯å®šä¹‰å½“å‰æœåŠ¡åº”è¯¥å¯åŠ¨åœ¨å“ªäº›æœåŠ¡ä¹‹åã€‚\n\nä¸Šè¿°é…ç½®æ–‡ä»¶è¯¥å€¼è§£é‡Šå°±æ˜¯ï¼šå½“`network.target remote-fs.target nss-lookup.target`è¿™äº›æœåŠ¡éœ€è¦å¯åŠ¨ï¼Œé‚£ä¹ˆå½“å‰çš„`httpd.service`åº”è¯¥åœ¨ä»–ä»¬ä¹‹åå¯åŠ¨ã€‚\n\nç›¸å¯¹çš„ï¼Œå’Œ`After`å¯¹åº”çš„è¿˜æœ‰ä¸ª`Before`å­—æ®µã€‚äº†è§£äº†`After`è¿™ä¸ª`Before`å°±åº”è¯¥å¾ˆå®¹æ˜“ç†è§£äº†ã€‚å®Œå…¨å’Œ`After`ç›¸å¯¹çš„æ„æ€ï¼Œå®šä¹‰`httpd.service`åº”è¯¥åœ¨å“ªäº›æœåŠ¡ä¹‹å‰å¯åŠ¨ã€‚\n\nAfterå’ŒBeforeåªå…³ä¹åˆ°æœåŠ¡çš„å¯åŠ¨é¡ºåºï¼Œå¹¶ä¸å…³ä¹åˆ°ä¾èµ–å…³ç³»ã€‚\n\n**Documentation**ï¼šè¯¥å­—æ®µæ¯”è¾ƒç®€å•ï¼Œå’Œ`Descripton`ä½œç”¨å·®ä¸å¤šã€‚å®ƒçš„å€¼ç”¨äºç»™å‡ºå½“å‰æœåŠ¡çš„æ–‡æ¡£çš„ä½ç½®ã€‚\n\nå½“å‰é…ç½®æ–‡ä»¶ä¸­å¹¶æ²¡æœ‰è¯´æ˜ä¾èµ–å…³ç³»çš„å­—æ®µã€‚ä¾èµ–å…³ç³»å’Œå¯åŠ¨é¡ºåºéƒ½æ˜¯å†™åœ¨å½“å‰è¿™ä¸ªUnitåŒºåŸŸçš„ï¼Œå®ƒä¿©éå¸¸åƒè±¡ï¼Œä½†æ˜¯ä½œç”¨ä¸åŒã€‚\n\nä¾èµ–å…³ç³»æœ‰ä¸¤ä¸ªå­—æ®µè¿›è¡Œæ§åˆ¶ï¼š`Wants`å’Œ`Requiers`ã€‚\n\n**Wants**ï¼šè¡¨ç¤ºå¼±ä¾èµ–å…³ç³»ï¼Œå³ä½¿è¯¥å€¼å†…çš„æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œä¹Ÿä¸å½±å“å½“å‰æœåŠ¡çš„ç»§ç»­è¿è¡Œã€‚\n\n**Requires**ï¼šè¡¨ç¤ºå¼ºä¾èµ–å…³ç³»ï¼Œå¦‚æœè¯¥å€¼å†…çš„æœåŠ¡æ— æ³•è¿è¡Œï¼Œé‚£ä¹ˆå½“å‰æœåŠ¡ä¹Ÿå°†åœæ­¢ã€‚\n\næ‰“ä¸ªæ¯”æ–¹ï¼š\n\nå½“å‰çš„httpd.serviceéœ€è¦ä¾èµ–mysqlæ¥å­˜å‚¨æ•°æ®ã€‚å¦‚æœåœ¨é…ç½®æ–‡ä»¶ä¸­å®ƒåªå®šä¹‰äº†åœ¨mysqlä¹‹åå¯åŠ¨ã€‚è€Œæ²¡å®šä¹‰ä¾èµ–å…³ç³»ï¼Œé‚£ä¹ˆå½“mysqlå‡ºç°é”™è¯¯åœæ­¢æ—¶ï¼Œåœ¨é‡æ–°å¯åŠ¨æœŸé—´ï¼Œå½“å‰çš„httpdå°†æ— æ³•ä¸mysqlå»ºç«‹é“¾æ¥ã€‚\n\n**è¿™é‡Œåªæ˜¯æ‰“ä¸ªæ¯”æ–¹å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„äº†è§£ï¼Œå®é™…æƒ…å†µä¸‹httpdåœ¨é€šå¸¸å’Œmysqlæ˜¯æ²¡æœ‰è¿™æ ·çš„ä¾èµ–å…³ç³»çš„ğŸ¥ã€‚**\n\n### ServiceåŒºåŸŸ\n\nServiceåŒºåŸŸæ˜¯ä¸»è¦çš„ä¸€éƒ¨åˆ†ï¼Œä¸»è¦æ§åˆ¶è½¯ä»¶çš„å¯åŠ¨åœæ­¢ç­‰ï¼Œéƒ½æ˜¯åœ¨æ­¤éƒ¨åˆ†å£°æ˜çš„ã€‚ä¹Ÿå°±æ˜¯å®šä¹‰äº†å¦‚ä½•å¯åŠ¨å½“å‰çš„æœåŠ¡ã€‚\n\nè®¸å¤šè½¯ä»¶éƒ½æœ‰ç¯å¢ƒå‚æ•°æ–‡ä»¶ï¼Œä½¿ç”¨`EnvironmentFile`å­—æ®µä¾¿å¯ä»¥å®šä¹‰ç¯å¢ƒå‚æ•°ã€‚\n\n`EnvironmentFile`å­—æ®µï¼šæŒ‡å®šå½“å‰æœåŠ¡çš„ç¯å¢ƒå‚æ•°æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶å†…éƒ¨çš„`key=value`é”®å€¼å¯¹ï¼Œå¯ä»¥ç”¨`$key`çš„å½¢å¼ï¼Œåœ¨å½“å‰é…ç½®æ–‡ä»¶ä¸­è·å–ã€‚\n\nä¾‹å¦‚ï¼Œå¯åŠ¨`sshd`ï¼Œæ‰§è¡Œçš„å‘½ä»¤æ˜¯`/usr/sbin/sshd -D $OPTIONS`ï¼Œå…¶ä¸­çš„å˜é‡`$OPTIONS`å°±æ¥è‡ª`EnvironmentFile`å­—æ®µæŒ‡å®šçš„ç¯å¢ƒå‚æ•°æ–‡ä»¶ã€‚\n\né™¤æ­¤ä¹‹å¤–ï¼ŒServiceåŒºåŸŸè¿˜æœ‰ä¸€äº›å…³äºæ§åˆ¶è½¯ä»¶è¡Œä¸ºçš„ä¸€äº›å­—æ®µï¼š\n\n* `ExecStart`å­—æ®µï¼šå®šä¹‰å¯åŠ¨è¿›ç¨‹æ—¶æ‰§è¡Œçš„å‘½ä»¤ã€‚\n\n- `ExecReload`å­—æ®µï¼šé‡å¯æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤\n- `ExecStop`å­—æ®µï¼šåœæ­¢æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤\n- `ExecStartPre`å­—æ®µï¼šå¯åŠ¨æœåŠ¡ä¹‹å‰æ‰§è¡Œçš„å‘½ä»¤\n- `ExecStartPost`å­—æ®µï¼šå¯åŠ¨æœåŠ¡ä¹‹åæ‰§è¡Œçš„å‘½ä»¤\n- `ExecStopPost`å­—æ®µï¼šåœæ­¢æœåŠ¡ä¹‹åæ‰§è¡Œçš„å‘½ä»¤\n\næ‰€æœ‰çš„å¯åŠ¨è®¾ç½®ä¹‹å‰ï¼Œéƒ½å¯ä»¥åŠ ä¸Šä¸€ä¸ªè¿è¯å·ï¼ˆ`-`ï¼‰ï¼Œè¡¨ç¤º\"æŠ‘åˆ¶é”™è¯¯\"ï¼Œå³å‘ç”Ÿé”™è¯¯çš„æ—¶å€™ï¼Œä¸å½±å“å…¶ä»–å‘½ä»¤çš„æ‰§è¡Œã€‚æ¯”å¦‚ï¼Œ`EnvironmentFile=-/etc/sysconfig/sshd`ï¼ˆæ³¨æ„ç­‰å·åé¢çš„é‚£ä¸ªè¿è¯å·ï¼‰ï¼Œå°±è¡¨ç¤ºå³ä½¿`/etc/sysconfig/sshd`æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¹Ÿä¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚\n\næ­¤å¤–ï¼ŒServiceä¸­è¿˜æœ‰å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„å­—æ®µ\n\n**Type**å­—æ®µï¼Œå®ƒæœ‰å¦‚ä¸‹ä¸€äº›å€¼ï¼š\n\n- simpleï¼ˆé»˜è®¤å€¼ï¼‰ï¼š`ExecStart`å­—æ®µå¯åŠ¨çš„è¿›ç¨‹ä¸ºä¸»è¿›ç¨‹\n- forkingï¼š`ExecStart`å­—æ®µå°†ä»¥`fork()`æ–¹å¼å¯åŠ¨ï¼Œæ­¤æ—¶çˆ¶è¿›ç¨‹å°†ä¼šé€€å‡ºï¼Œå­è¿›ç¨‹å°†æˆä¸ºä¸»è¿›ç¨‹\n- oneshotï¼šç±»ä¼¼äº`simple`ï¼Œä½†åªæ‰§è¡Œä¸€æ¬¡ï¼ŒSystemd ä¼šç­‰å®ƒæ‰§è¡Œå®Œï¼Œæ‰å¯åŠ¨å…¶ä»–æœåŠ¡\n- dbusï¼šç±»ä¼¼äº`simple`ï¼Œä½†ä¼šç­‰å¾… D-Bus ä¿¡å·åå¯åŠ¨\n- notifyï¼šç±»ä¼¼äº`simple`ï¼Œå¯åŠ¨ç»“æŸåä¼šå‘å‡ºé€šçŸ¥ä¿¡å·ï¼Œç„¶å Systemd å†å¯åŠ¨å…¶ä»–æœåŠ¡\n- idleï¼šç±»ä¼¼äº`simple`ï¼Œä½†æ˜¯è¦ç­‰åˆ°å…¶ä»–ä»»åŠ¡éƒ½æ‰§è¡Œå®Œï¼Œæ‰ä¼šå¯åŠ¨è¯¥æœåŠ¡ã€‚ä¸€ç§ä½¿ç”¨åœºåˆæ˜¯ä¸ºè®©è¯¥æœåŠ¡çš„è¾“å‡ºï¼Œä¸ä¸å…¶ä»–æœåŠ¡çš„è¾“å‡ºç›¸æ··åˆ\n\n### InstallåŒºåŸŸ\n\n`Install`åŒºå—ï¼Œå®šä¹‰å¦‚ä½•å®‰è£…è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œå³æ€æ ·åšåˆ°å¼€æœºå¯åŠ¨ã€‚\n\n`WantedBy`å­—æ®µï¼šè¡¨ç¤ºè¯¥æœåŠ¡æ‰€åœ¨çš„ Targetã€‚\n\n`Target`çš„å«ä¹‰æ˜¯æœåŠ¡ç»„ï¼Œè¡¨ç¤ºä¸€ç»„æœåŠ¡ã€‚`WantedBy=multi-user.target`æŒ‡çš„æ˜¯ï¼Œsshd æ‰€åœ¨çš„ Target æ˜¯`multi-user.target`ã€‚\n\nè¿™ä¸ªè®¾ç½®éå¸¸é‡è¦ï¼Œå› ä¸ºæ‰§è¡Œ`systemctl enable sshd.service`å‘½ä»¤æ—¶ï¼Œ`sshd.service`çš„ä¸€ä¸ªç¬¦å·é“¾æ¥ï¼Œå°±ä¼šæ”¾åœ¨`/etc/systemd/system`ç›®å½•ä¸‹é¢çš„`multi-user.target.wants`å­ç›®å½•ä¹‹ä¸­ã€‚\n\nSystemd æœ‰é»˜è®¤çš„å¯åŠ¨ Targetã€‚\n\n ```bash\n $ systemctl get-default\n multi-user.target\n ```\n\nä¸€èˆ¬æ¥è¯´ï¼Œå¸¸ç”¨çš„ Target æœ‰ä¸¤ä¸ªï¼šä¸€ä¸ªæ˜¯`multi-user.target`ï¼Œè¡¨ç¤ºå¤šç”¨æˆ·å‘½ä»¤è¡ŒçŠ¶æ€ï¼›å¦ä¸€ä¸ªæ˜¯`graphical.target`ï¼Œè¡¨ç¤ºå›¾å½¢ç”¨æˆ·çŠ¶æ€ï¼Œå®ƒä¾èµ–äº`multi-user.target`ã€‚å®˜æ–¹æ–‡æ¡£æœ‰ä¸€å¼ éå¸¸æ¸…æ™°çš„ [Target ä¾èµ–å…³ç³»å›¾](https://www.freedesktop.org/software/systemd/man/bootup.html#System Manager Bootup)ã€‚\n\nTarget ä¹Ÿæœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚\n\n```bash\n$ systemctl cat multi-user.target\n\n[Unit]\nDescription=Multi-User System\nDocumentation=man:systemd.special(7)\nRequires=basic.target\nConflicts=rescue.service rescue.target\nAfter=basic.target rescue.service rescue.target\nAllowIsolate=yes\n```\n\n## è¯¦ç»†çš„å­—æ®µè§£é‡Š\n\n```\n[Unit]\nDescription : æœåŠ¡çš„ç®€å•æè¿°\nDocumentation ï¼š æœåŠ¡æ–‡æ¡£\nBeforeã€After:å®šä¹‰å¯åŠ¨é¡ºåºã€‚Before=xxx.service,ä»£è¡¨æœ¬æœåŠ¡åœ¨xxx.serviceå¯åŠ¨ä¹‹å‰å¯åŠ¨ã€‚After=xxx.service,ä»£è¡¨æœ¬æœåŠ¡åœ¨xxx.serviceä¹‹åå¯åŠ¨ã€‚\nRequiresï¼šè¿™ä¸ªå•å…ƒå¯åŠ¨äº†ï¼Œå®ƒéœ€è¦çš„å•å…ƒä¹Ÿä¼šè¢«å¯åŠ¨ï¼›å®ƒéœ€è¦çš„å•å…ƒè¢«åœæ­¢äº†ï¼Œè¿™ä¸ªå•å…ƒä¹Ÿåœæ­¢äº†ã€‚\nWantsï¼šæ¨èä½¿ç”¨ã€‚è¿™ä¸ªå•å…ƒå¯åŠ¨äº†ï¼Œå®ƒéœ€è¦çš„å•å…ƒä¹Ÿä¼šè¢«å¯åŠ¨ï¼›å®ƒéœ€è¦çš„å•å…ƒè¢«åœæ­¢äº†ï¼Œå¯¹æœ¬å•å…ƒæ²¡æœ‰å½±å“ã€‚\n```\n\n```\n[Service]\nType=simpleï¼ˆé»˜è®¤å€¼ï¼‰ï¼šsystemdè®¤ä¸ºè¯¥æœåŠ¡å°†ç«‹å³å¯åŠ¨ã€‚æœåŠ¡è¿›ç¨‹ä¸ä¼šforkã€‚å¦‚æœè¯¥æœåŠ¡è¦å¯åŠ¨å…¶ä»–æœåŠ¡ï¼Œä¸è¦ä½¿ç”¨æ­¤ç±»å‹å¯åŠ¨ï¼Œé™¤éè¯¥æœåŠ¡æ˜¯socketæ¿€æ´»å‹ã€‚\nType=forkingï¼šsystemdè®¤ä¸ºå½“è¯¥æœåŠ¡è¿›ç¨‹forkï¼Œä¸”çˆ¶è¿›ç¨‹é€€å‡ºåæœåŠ¡å¯åŠ¨æˆåŠŸã€‚å¯¹äºå¸¸è§„çš„å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰ï¼Œé™¤éä½ ç¡®å®šæ­¤å¯åŠ¨æ–¹å¼æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œä½¿ç”¨æ­¤ç±»å‹å¯åŠ¨å³å¯ã€‚ä½¿ç”¨æ­¤å¯åŠ¨ç±»å‹åº”åŒæ—¶æŒ‡å®š PIDFile=ï¼Œä»¥ä¾¿systemdèƒ½å¤Ÿè·Ÿè¸ªæœåŠ¡çš„ä¸»è¿›ç¨‹ã€‚\nType=oneshotï¼šè¿™ä¸€é€‰é¡¹é€‚ç”¨äºåªæ‰§è¡Œä¸€é¡¹ä»»åŠ¡ã€éšåç«‹å³é€€å‡ºçš„æœåŠ¡ã€‚å¯èƒ½éœ€è¦åŒæ—¶è®¾ç½® RemainAfterExit=yes ä½¿å¾— systemd åœ¨æœåŠ¡è¿›ç¨‹é€€å‡ºä¹‹åä»ç„¶è®¤ä¸ºæœåŠ¡å¤„äºæ¿€æ´»çŠ¶æ€ã€‚\nType=notifyï¼šä¸ Type=simple ç›¸åŒï¼Œä½†çº¦å®šæœåŠ¡ä¼šåœ¨å°±ç»ªåå‘ systemd å‘é€ä¸€ä¸ªä¿¡å·ã€‚è¿™ä¸€é€šçŸ¥çš„å®ç°ç”± libsystemd-daemon.so æä¾›ã€‚\nType=dbusï¼šè‹¥ä»¥æ­¤æ–¹å¼å¯åŠ¨ï¼Œå½“æŒ‡å®šçš„ BusName å‡ºç°åœ¨DBusç³»ç»Ÿæ€»çº¿ä¸Šæ—¶ï¼Œsystemdè®¤ä¸ºæœåŠ¡å°±ç»ªã€‚\nType=idle: systemdä¼šç­‰å¾…æ‰€æœ‰ä»»åŠ¡(Jobs)å¤„ç†å®Œæˆåï¼Œæ‰å¼€å§‹æ‰§è¡Œidleç±»å‹çš„å•å…ƒã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå…¶ä»–è¡Œä¸ºå’ŒType=simple ç±»ä¼¼ã€‚\nPIDFileï¼špidæ–‡ä»¶è·¯å¾„\nExecStartPreï¼šåœæ­¢æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤\nExecStartï¼šæŒ‡å®šå¯åŠ¨å•å…ƒçš„å‘½ä»¤æˆ–è€…è„šæœ¬ï¼ŒExecStartPreå’ŒExecStartPostèŠ‚æŒ‡å®šåœ¨ExecStartä¹‹å‰æˆ–è€…ä¹‹åç”¨æˆ·è‡ªå®šä¹‰æ‰§è¡Œçš„è„šæœ¬ã€‚Type=oneshotå…è®¸æŒ‡å®šå¤šä¸ªå¸Œæœ›é¡ºåºæ‰§è¡Œçš„ç”¨æˆ·è‡ªå®šä¹‰å‘½ä»¤ã€‚\nExecReloadï¼šæŒ‡å®šå•å…ƒåœæ­¢æ—¶æ‰§è¡Œçš„å‘½ä»¤æˆ–è€…è„šæœ¬ã€‚\nExecStopï¼šæŒ‡å®šå•å…ƒåœæ­¢æ—¶æ‰§è¡Œçš„å‘½ä»¤æˆ–è€…è„šæœ¬ã€‚\nExecStopPostï¼šåœæ­¢æœåŠ¡ä¹‹åæ‰§è¡Œçš„å‘½ä»¤\nExecStartPostï¼šå¯åŠ¨æœåŠ¡ä¹‹åæ‰§è¡Œçš„å‘½ä»¤\nPrivateTmpï¼šTrueè¡¨ç¤ºç»™æœåŠ¡åˆ†é…ç‹¬ç«‹çš„ä¸´æ—¶ç©ºé—´\nRestartï¼šè¿™ä¸ªé€‰é¡¹å¦‚æœè¢«å…è®¸ï¼ŒæœåŠ¡é‡å¯çš„æ—¶å€™è¿›ç¨‹ä¼šé€€å‡ºï¼Œä¼šé€šè¿‡systemctlå‘½ä»¤æ‰§è¡Œæ¸…é™¤å¹¶é‡å¯çš„æ“ä½œã€‚\nRemainAfterExitï¼šå¦‚æœè®¾ç½®è¿™ä¸ªé€‰æ‹©ä¸ºçœŸï¼ŒæœåŠ¡ä¼šè¢«è®¤ä¸ºæ˜¯åœ¨æ¿€æ´»çŠ¶æ€ï¼Œå³ä½¿æ‰€ä»¥çš„è¿›ç¨‹å·²ç»é€€å‡ºï¼Œé»˜è®¤çš„å€¼ä¸ºå‡ï¼Œè¿™ä¸ªé€‰é¡¹åªæœ‰åœ¨Type=oneshotæ—¶éœ€è¦è¢«é…ç½®ã€‚\n```\n\n```\n[Install]\nAliasï¼šä¸ºå•å…ƒæä¾›ä¸€ä¸ªç©ºé—´åˆ†ç¦»çš„é™„åŠ åå­—ã€‚\nRequiredByï¼šå•å…ƒè¢«å…è®¸è¿è¡Œéœ€è¦çš„ä¸€ç³»åˆ—ä¾èµ–å•å…ƒï¼ŒRequiredByåˆ—è¡¨ä»Requireè·å¾—ä¾èµ–ä¿¡æ¯ã€‚\nWantByï¼šå•å…ƒè¢«å…è®¸è¿è¡Œéœ€è¦çš„å¼±ä¾èµ–æ€§å•å…ƒï¼ŒWantbyä»Wantåˆ—è¡¨è·å¾—ä¾èµ–ä¿¡æ¯ã€‚\nAlsoï¼šæŒ‡å‡ºå’Œå•å…ƒä¸€èµ·å®‰è£…æˆ–è€…è¢«ååŠ©çš„å•å…ƒã€‚\nDefaultInstanceï¼šå®ä¾‹å•å…ƒçš„é™åˆ¶ï¼Œè¿™ä¸ªé€‰é¡¹æŒ‡å®šå¦‚æœå•å…ƒè¢«å…è®¸è¿è¡Œé»˜è®¤çš„å®ä¾‹ã€‚\n```\n\n## é‡å¯\n\n```bash\n# é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶\n$ sudo systemctl daemon-reload\n\n# é‡å¯ç›¸å…³æœåŠ¡\n$ sudo systemctl restart foobar\n```\n","desc":"ä»€ä¹ˆæ˜¯systemdï¼Ÿ\n\nSystemdæ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ä¸€äº›Linuxå‘è¡Œç‰ˆä¸­å¸¸è§çš„ä¸€å¥—ä¸­å¤®åŒ–ç³»ç»ŸåŠè®¾ç½®ç®¡ç†ç¨‹åº(init)ï¼ŒåŒ…æ‹¬æœ‰å®ˆæŠ¤è¿›ç¨‹ã€ç¨‹åºåº“ä»¥åŠåº”ç”¨è½¯ä»¶ã€‚\n\næˆ‘ä»¬ç»å¸¸ä½¿ç”¨systemctl sta...","title":"systemd çš„åŸºç¡€æ“ä½œ","date":"2019-06-14T14:42:41.000Z","tags":"Linux","categories":"Linux","url":"basic-knowledge-of-systemd","index_img":"/images/systemdçš„åŸºç¡€æ“ä½œ/logo.webp"}},"__N_SSG":true},"page":"/p/[slug]","query":{"slug":"basic-knowledge-of-systemd"},"buildId":"k6NIc4JfXUsE09z9QnALx","isFallback":false,"dynamicIds":[3419,6929,1189,9125,2980,5106],"gsp":true,"scriptLoader":[]}</script></body></html>